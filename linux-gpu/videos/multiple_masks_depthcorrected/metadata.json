{
  "frames": [
    {
      "file": "frame_000.jpg",
      "time": 0.0,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content."
    },
    {
      "file": "frame_001.jpg",
      "time": 0.27,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt"
    },
    {
      "file": "frame_002.jpg",
      "time": 0.86,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt"
    },
    {
      "file": "frame_003.jpg",
      "time": 1.06,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete."
    },
    {
      "file": "frame_004.jpg",
      "time": 1.3,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete."
    },
    {
      "file": "frame_005.jpg",
      "time": 15.96,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians"
    },
    {
      "file": "frame_006.jpg",
      "time": 16.29,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians"
    },
    {
      "file": "frame_007.jpg",
      "time": 18.65,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values="
    },
    {
      "file": "frame_008.jpg",
      "time": 18.94,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values="
    },
    {
      "file": "frame_009.jpg",
      "time": 23.25,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]"
    },
    {
      "file": "frame_010.jpg",
      "time": 23.58,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]"
    },
    {
      "file": "frame_011.jpg",
      "time": 29.42,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 6 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 7 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 8 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 9 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 10 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Using DA3 intrinsics: fx=2977.0, fy=2604.2\n  [ComfyUI]   [SAM3DBody] Image: 1200x497, Depth map: 1200x496\n  [ComfyUI]   [SAM3DBody] Person 0:\n  [ComfyUI]     mesh_height=1.265m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 39 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1009, max=0.1133, mean=0.1045\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 39/39, confidence=0.069\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.069\n  [ComfyUI]         visible_joints=39, occluded_joints=31\n  [ComfyUI]         median_depth=1.1322896480560303\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=39, occluded_joints=31, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1:\n  [ComfyUI]     mesh_height=1.443m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 15 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0992, max=0.1084, mean=0.1039\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 15/15, confidence=0.626\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.626\n  [ComfyUI]         visible_joints=15, occluded_joints=55\n  [ComfyUI]         median_depth=0.8624514937400818\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=15, occluded_joints=55, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2:\n  [ComfyUI]     mesh_height=1.643m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1490, max=0.1603, mean=0.1540\n  [ComfyUI]         Median ratio (scale factor): 0.1547\n  [ComfyUI]         Inliers: 13/13, confidence=0.545\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1547, confidence=0.545\n  [ComfyUI]         visible_joints=13, occluded_joints=57\n  [ComfyUI]         median_depth=0.9505064487457275\n  [ComfyUI]     [intrinsics method] scale=0.155, visible_joints=13, occluded_joints=57, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3:\n  [ComfyUI]     mesh_height=1.494m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 14 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0945, max=0.1015, mean=0.0972\n  [ComfyUI]         Median ratio (scale factor): 0.0966\n  [ComfyUI]         Inliers: 14/14, confidence=0.000\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0966, confidence=0.000\n  [ComfyUI]         visible_joints=14, occluded_joints=56\n  [ComfyUI]         median_depth=1.3449103832244873\n  [ComfyUI]     [intrinsics method] scale=0.097, visible_joints=14, occluded_joints=56, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4:\n  [ComfyUI]     mesh_height=1.649m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1395, max=0.2134, mean=0.1505\n  [ComfyUI]         Median ratio (scale factor): 0.1431\n  [ComfyUI]           Joint 2: ratio=0.2134, rel_error=0.492 -> OUTLIER\n  [ComfyUI]         Inliers: 12/13, confidence=0.544\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1431, confidence=0.544\n  [ComfyUI]         visible_joints=12, occluded_joints=58\n  [ComfyUI]         median_depth=0.9796111583709717\n  [ComfyUI]     [intrinsics method] scale=0.143, visible_joints=12, occluded_joints=58, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5:\n  [ComfyUI]     mesh_height=1.606m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 32 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1213, max=0.1404, mean=0.1275\n  [ComfyUI]         Median ratio (scale factor): 0.1251\n  [ComfyUI]         Inliers: 32/32, confidence=0.488\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1251, confidence=0.488\n  [ComfyUI]         visible_joints=32, occluded_joints=38\n  [ComfyUI]         median_depth=1.008958339691162\n  [ComfyUI]     [intrinsics method] scale=0.125, visible_joints=32, occluded_joints=38, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6:\n  [ComfyUI]     mesh_height=1.485m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 9 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0921, max=0.0970, mean=0.0946\n  [ComfyUI]         Median ratio (scale factor): 0.0942\n  [ComfyUI]         Inliers: 9/9, confidence=0.701\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0942, confidence=0.701\n  [ComfyUI]         visible_joints=9, occluded_joints=61\n  [ComfyUI]         median_depth=0.9265626072883606\n  [ComfyUI]     [intrinsics method] scale=0.094, visible_joints=9, occluded_joints=61, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7:\n  [ComfyUI]     mesh_height=1.594m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 31 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0962, max=0.1042, mean=0.0999\n  [ComfyUI]         Median ratio (scale factor): 0.0997\n  [ComfyUI]         Inliers: 31/31, confidence=0.674\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0997, confidence=0.674\n  [ComfyUI]         visible_joints=31, occluded_joints=39\n  [ComfyUI]         median_depth=0.8953904509544373\n  [ComfyUI]     [intrinsics method] scale=0.100, visible_joints=31, occluded_joints=39, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8:\n  [ComfyUI]     mesh_height=1.661m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 60 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1334, max=0.2002, mean=0.1412\n  [ComfyUI]         Median ratio (scale factor): 0.1416\n  [ComfyUI]           Joint 67: ratio=0.2002, rel_error=0.414 -> OUTLIER\n  [ComfyUI]         Inliers: 59/60, confidence=0.577\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1416, confidence=0.577\n  [ComfyUI]         visible_joints=59, occluded_joints=11\n  [ComfyUI]         median_depth=0.8718128800392151\n  [ComfyUI]     [intrinsics method] scale=0.142, visible_joints=59, occluded_joints=11, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9:\n  [ComfyUI]     mesh_height=1.499m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 34 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1042, max=0.1123, mean=0.1091\n  [ComfyUI]         Median ratio (scale factor): 0.1100\n  [ComfyUI]         Inliers: 34/34, confidence=0.628\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1100, confidence=0.628\n  [ComfyUI]         visible_joints=34, occluded_joints=36\n  [ComfyUI]         median_depth=0.9202026128768921\n  [ComfyUI]     [intrinsics method] scale=0.110, visible_joints=34, occluded_joints=36, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10:\n  [ComfyUI]     mesh_height=1.508m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 16 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0942, max=0.1016, mean=0.0982\n  [ComfyUI]         Median ratio (scale factor): 0.0982\n  [ComfyUI]         Inliers: 16/16, confidence=0.666\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0982, confidence=0.666\n  [ComfyUI]         visible_joints=16, occluded_joints=54\n  [ComfyUI]         median_depth=0.8790579438209534\n  [ComfyUI]     [intrinsics method] scale=0.098, visible_joints=16, occluded_joints=54, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Median scale: 0.103\n  [ComfyUI]   [SAM3DBody] Person 0 final: scale=1.000, height=1.26m, tz=1.13, method=intrinsics_visibility, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1 final: scale=1.000, height=1.44m, tz=0.86, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2 final: scale=1.500, height=2.46m, tz=0.95, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3 final: scale=0.937, height=1.40m, tz=1.34, method=intrinsics_visibility, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4 final: scale=1.388, height=2.29m, tz=0.98, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5 final: scale=1.214, height=1.95m, tz=1.01, method=intrinsics_visibility, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6 final: scale=0.914, height=1.36m, tz=0.93, method=intrinsics_visibility, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7 final: scale=0.966, height=1.54m, tz=0.90, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8 final: scale=1.373, height=2.28m, tz=0.87, method=intrinsics_visibility, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9 final: scale=1.067, height=1.60m, tz=0.92, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10 final: scale=0.953, height=1.44m, tz=0.88, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [worker] Method returned"
    },
    {
      "file": "frame_012.jpg",
      "time": 47.95,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 6 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 7 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 8 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 9 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 10 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Using DA3 intrinsics: fx=2977.0, fy=2604.2\n  [ComfyUI]   [SAM3DBody] Image: 1200x497, Depth map: 1200x496\n  [ComfyUI]   [SAM3DBody] Person 0:\n  [ComfyUI]     mesh_height=1.265m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 39 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1009, max=0.1133, mean=0.1045\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 39/39, confidence=0.069\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.069\n  [ComfyUI]         visible_joints=39, occluded_joints=31\n  [ComfyUI]         median_depth=1.1322896480560303\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=39, occluded_joints=31, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1:\n  [ComfyUI]     mesh_height=1.443m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 15 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0992, max=0.1084, mean=0.1039\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 15/15, confidence=0.626\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.626\n  [ComfyUI]         visible_joints=15, occluded_joints=55\n  [ComfyUI]         median_depth=0.8624514937400818\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=15, occluded_joints=55, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2:\n  [ComfyUI]     mesh_height=1.643m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1490, max=0.1603, mean=0.1540\n  [ComfyUI]         Median ratio (scale factor): 0.1547\n  [ComfyUI]         Inliers: 13/13, confidence=0.545\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1547, confidence=0.545\n  [ComfyUI]         visible_joints=13, occluded_joints=57\n  [ComfyUI]         median_depth=0.9505064487457275\n  [ComfyUI]     [intrinsics method] scale=0.155, visible_joints=13, occluded_joints=57, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3:\n  [ComfyUI]     mesh_height=1.494m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 14 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0945, max=0.1015, mean=0.0972\n  [ComfyUI]         Median ratio (scale factor): 0.0966\n  [ComfyUI]         Inliers: 14/14, confidence=0.000\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0966, confidence=0.000\n  [ComfyUI]         visible_joints=14, occluded_joints=56\n  [ComfyUI]         median_depth=1.3449103832244873\n  [ComfyUI]     [intrinsics method] scale=0.097, visible_joints=14, occluded_joints=56, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4:\n  [ComfyUI]     mesh_height=1.649m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1395, max=0.2134, mean=0.1505\n  [ComfyUI]         Median ratio (scale factor): 0.1431\n  [ComfyUI]           Joint 2: ratio=0.2134, rel_error=0.492 -> OUTLIER\n  [ComfyUI]         Inliers: 12/13, confidence=0.544\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1431, confidence=0.544\n  [ComfyUI]         visible_joints=12, occluded_joints=58\n  [ComfyUI]         median_depth=0.9796111583709717\n  [ComfyUI]     [intrinsics method] scale=0.143, visible_joints=12, occluded_joints=58, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5:\n  [ComfyUI]     mesh_height=1.606m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 32 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1213, max=0.1404, mean=0.1275\n  [ComfyUI]         Median ratio (scale factor): 0.1251\n  [ComfyUI]         Inliers: 32/32, confidence=0.488\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1251, confidence=0.488\n  [ComfyUI]         visible_joints=32, occluded_joints=38\n  [ComfyUI]         median_depth=1.008958339691162\n  [ComfyUI]     [intrinsics method] scale=0.125, visible_joints=32, occluded_joints=38, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6:\n  [ComfyUI]     mesh_height=1.485m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 9 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0921, max=0.0970, mean=0.0946\n  [ComfyUI]         Median ratio (scale factor): 0.0942\n  [ComfyUI]         Inliers: 9/9, confidence=0.701\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0942, confidence=0.701\n  [ComfyUI]         visible_joints=9, occluded_joints=61\n  [ComfyUI]         median_depth=0.9265626072883606\n  [ComfyUI]     [intrinsics method] scale=0.094, visible_joints=9, occluded_joints=61, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7:\n  [ComfyUI]     mesh_height=1.594m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 31 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0962, max=0.1042, mean=0.0999\n  [ComfyUI]         Median ratio (scale factor): 0.0997\n  [ComfyUI]         Inliers: 31/31, confidence=0.674\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0997, confidence=0.674\n  [ComfyUI]         visible_joints=31, occluded_joints=39\n  [ComfyUI]         median_depth=0.8953904509544373\n  [ComfyUI]     [intrinsics method] scale=0.100, visible_joints=31, occluded_joints=39, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8:\n  [ComfyUI]     mesh_height=1.661m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 60 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1334, max=0.2002, mean=0.1412\n  [ComfyUI]         Median ratio (scale factor): 0.1416\n  [ComfyUI]           Joint 67: ratio=0.2002, rel_error=0.414 -> OUTLIER\n  [ComfyUI]         Inliers: 59/60, confidence=0.577\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1416, confidence=0.577\n  [ComfyUI]         visible_joints=59, occluded_joints=11\n  [ComfyUI]         median_depth=0.8718128800392151\n  [ComfyUI]     [intrinsics method] scale=0.142, visible_joints=59, occluded_joints=11, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9:\n  [ComfyUI]     mesh_height=1.499m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 34 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1042, max=0.1123, mean=0.1091\n  [ComfyUI]         Median ratio (scale factor): 0.1100\n  [ComfyUI]         Inliers: 34/34, confidence=0.628\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1100, confidence=0.628\n  [ComfyUI]         visible_joints=34, occluded_joints=36\n  [ComfyUI]         median_depth=0.9202026128768921\n  [ComfyUI]     [intrinsics method] scale=0.110, visible_joints=34, occluded_joints=36, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10:\n  [ComfyUI]     mesh_height=1.508m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 16 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0942, max=0.1016, mean=0.0982\n  [ComfyUI]         Median ratio (scale factor): 0.0982\n  [ComfyUI]         Inliers: 16/16, confidence=0.666\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0982, confidence=0.666\n  [ComfyUI]         visible_joints=16, occluded_joints=54\n  [ComfyUI]         median_depth=0.8790579438209534\n  [ComfyUI]     [intrinsics method] scale=0.098, visible_joints=16, occluded_joints=54, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Median scale: 0.103\n  [ComfyUI]   [SAM3DBody] Person 0 final: scale=1.000, height=1.26m, tz=1.13, method=intrinsics_visibility, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1 final: scale=1.000, height=1.44m, tz=0.86, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2 final: scale=1.500, height=2.46m, tz=0.95, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3 final: scale=0.937, height=1.40m, tz=1.34, method=intrinsics_visibility, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4 final: scale=1.388, height=2.29m, tz=0.98, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5 final: scale=1.214, height=1.95m, tz=1.01, method=intrinsics_visibility, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6 final: scale=0.914, height=1.36m, tz=0.93, method=intrinsics_visibility, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7 final: scale=0.966, height=1.54m, tz=0.90, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8 final: scale=1.373, height=2.28m, tz=0.87, method=intrinsics_visibility, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9 final: scale=1.067, height=1.60m, tz=0.92, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10 final: scale=0.953, height=1.44m, tz=0.88, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_8dddf901_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmplpg4znbb_person0.obj' took 22.70 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmprj_8xmpi_person1.obj' took 24.04 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpu6qin_8s_person2.obj' took 38.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpjnjux039_person3.obj' took 25.49 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpg7zgylzr_person4.obj' took 24.65 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpux4gf70q_person5.obj' took 26.78 ms\n  [ComfyUI]   [BpyFBXExporter] Person 6: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmptuihhro6_person6.obj' took 23.37 ms\n  [ComfyUI]   [BpyFBXExporter] Person 7: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpxxijr5ou_person7.obj' took 26.07 ms\n  [ComfyUI]   [BpyFBXExporter] Person 8: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9v9tqra_person8.obj' took 25.88 ms\n  [ComfyUI]   [BpyFBXExporter] Person 9: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9wududk_person9.obj' took 22.31 ms\n  [ComfyUI]   [BpyFBXExporter] Person 10: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpwhrdtol6_person10.obj' took 23.16 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_6'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_7'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_8'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_9'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_10'], 'POSE')\n  [ComfyUI]   export finished in 5.2529 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 47.55 seconds"
    },
    {
      "file": "frame_013.jpg",
      "time": 58.9,
      "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 6 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 7 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 8 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 9 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 10 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Using DA3 intrinsics: fx=2977.0, fy=2604.2\n  [ComfyUI]   [SAM3DBody] Image: 1200x497, Depth map: 1200x496\n  [ComfyUI]   [SAM3DBody] Person 0:\n  [ComfyUI]     mesh_height=1.265m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 39 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1009, max=0.1133, mean=0.1045\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 39/39, confidence=0.069\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.069\n  [ComfyUI]         visible_joints=39, occluded_joints=31\n  [ComfyUI]         median_depth=1.1322896480560303\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=39, occluded_joints=31, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1:\n  [ComfyUI]     mesh_height=1.443m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 15 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0992, max=0.1084, mean=0.1039\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 15/15, confidence=0.626\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.626\n  [ComfyUI]         visible_joints=15, occluded_joints=55\n  [ComfyUI]         median_depth=0.8624514937400818\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=15, occluded_joints=55, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2:\n  [ComfyUI]     mesh_height=1.643m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1490, max=0.1603, mean=0.1540\n  [ComfyUI]         Median ratio (scale factor): 0.1547\n  [ComfyUI]         Inliers: 13/13, confidence=0.545\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1547, confidence=0.545\n  [ComfyUI]         visible_joints=13, occluded_joints=57\n  [ComfyUI]         median_depth=0.9505064487457275\n  [ComfyUI]     [intrinsics method] scale=0.155, visible_joints=13, occluded_joints=57, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3:\n  [ComfyUI]     mesh_height=1.494m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 14 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0945, max=0.1015, mean=0.0972\n  [ComfyUI]         Median ratio (scale factor): 0.0966\n  [ComfyUI]         Inliers: 14/14, confidence=0.000\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0966, confidence=0.000\n  [ComfyUI]         visible_joints=14, occluded_joints=56\n  [ComfyUI]         median_depth=1.3449103832244873\n  [ComfyUI]     [intrinsics method] scale=0.097, visible_joints=14, occluded_joints=56, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4:\n  [ComfyUI]     mesh_height=1.649m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1395, max=0.2134, mean=0.1505\n  [ComfyUI]         Median ratio (scale factor): 0.1431\n  [ComfyUI]           Joint 2: ratio=0.2134, rel_error=0.492 -> OUTLIER\n  [ComfyUI]         Inliers: 12/13, confidence=0.544\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1431, confidence=0.544\n  [ComfyUI]         visible_joints=12, occluded_joints=58\n  [ComfyUI]         median_depth=0.9796111583709717\n  [ComfyUI]     [intrinsics method] scale=0.143, visible_joints=12, occluded_joints=58, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5:\n  [ComfyUI]     mesh_height=1.606m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 32 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1213, max=0.1404, mean=0.1275\n  [ComfyUI]         Median ratio (scale factor): 0.1251\n  [ComfyUI]         Inliers: 32/32, confidence=0.488\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1251, confidence=0.488\n  [ComfyUI]         visible_joints=32, occluded_joints=38\n  [ComfyUI]         median_depth=1.008958339691162\n  [ComfyUI]     [intrinsics method] scale=0.125, visible_joints=32, occluded_joints=38, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6:\n  [ComfyUI]     mesh_height=1.485m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 9 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0921, max=0.0970, mean=0.0946\n  [ComfyUI]         Median ratio (scale factor): 0.0942\n  [ComfyUI]         Inliers: 9/9, confidence=0.701\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0942, confidence=0.701\n  [ComfyUI]         visible_joints=9, occluded_joints=61\n  [ComfyUI]         median_depth=0.9265626072883606\n  [ComfyUI]     [intrinsics method] scale=0.094, visible_joints=9, occluded_joints=61, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7:\n  [ComfyUI]     mesh_height=1.594m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 31 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0962, max=0.1042, mean=0.0999\n  [ComfyUI]         Median ratio (scale factor): 0.0997\n  [ComfyUI]         Inliers: 31/31, confidence=0.674\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0997, confidence=0.674\n  [ComfyUI]         visible_joints=31, occluded_joints=39\n  [ComfyUI]         median_depth=0.8953904509544373\n  [ComfyUI]     [intrinsics method] scale=0.100, visible_joints=31, occluded_joints=39, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8:\n  [ComfyUI]     mesh_height=1.661m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 60 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1334, max=0.2002, mean=0.1412\n  [ComfyUI]         Median ratio (scale factor): 0.1416\n  [ComfyUI]           Joint 67: ratio=0.2002, rel_error=0.414 -> OUTLIER\n  [ComfyUI]         Inliers: 59/60, confidence=0.577\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1416, confidence=0.577\n  [ComfyUI]         visible_joints=59, occluded_joints=11\n  [ComfyUI]         median_depth=0.8718128800392151\n  [ComfyUI]     [intrinsics method] scale=0.142, visible_joints=59, occluded_joints=11, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9:\n  [ComfyUI]     mesh_height=1.499m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 34 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1042, max=0.1123, mean=0.1091\n  [ComfyUI]         Median ratio (scale factor): 0.1100\n  [ComfyUI]         Inliers: 34/34, confidence=0.628\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1100, confidence=0.628\n  [ComfyUI]         visible_joints=34, occluded_joints=36\n  [ComfyUI]         median_depth=0.9202026128768921\n  [ComfyUI]     [intrinsics method] scale=0.110, visible_joints=34, occluded_joints=36, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10:\n  [ComfyUI]     mesh_height=1.508m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 16 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0942, max=0.1016, mean=0.0982\n  [ComfyUI]         Median ratio (scale factor): 0.0982\n  [ComfyUI]         Inliers: 16/16, confidence=0.666\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0982, confidence=0.666\n  [ComfyUI]         visible_joints=16, occluded_joints=54\n  [ComfyUI]         median_depth=0.8790579438209534\n  [ComfyUI]     [intrinsics method] scale=0.098, visible_joints=16, occluded_joints=54, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Median scale: 0.103\n  [ComfyUI]   [SAM3DBody] Person 0 final: scale=1.000, height=1.26m, tz=1.13, method=intrinsics_visibility, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1 final: scale=1.000, height=1.44m, tz=0.86, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2 final: scale=1.500, height=2.46m, tz=0.95, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3 final: scale=0.937, height=1.40m, tz=1.34, method=intrinsics_visibility, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4 final: scale=1.388, height=2.29m, tz=0.98, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5 final: scale=1.214, height=1.95m, tz=1.01, method=intrinsics_visibility, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6 final: scale=0.914, height=1.36m, tz=0.93, method=intrinsics_visibility, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7 final: scale=0.966, height=1.54m, tz=0.90, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8 final: scale=1.373, height=2.28m, tz=0.87, method=intrinsics_visibility, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9 final: scale=1.067, height=1.60m, tz=0.92, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10 final: scale=0.953, height=1.44m, tz=0.88, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_8dddf901_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmplpg4znbb_person0.obj' took 22.70 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmprj_8xmpi_person1.obj' took 24.04 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpu6qin_8s_person2.obj' took 38.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpjnjux039_person3.obj' took 25.49 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpg7zgylzr_person4.obj' took 24.65 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpux4gf70q_person5.obj' took 26.78 ms\n  [ComfyUI]   [BpyFBXExporter] Person 6: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmptuihhro6_person6.obj' took 23.37 ms\n  [ComfyUI]   [BpyFBXExporter] Person 7: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpxxijr5ou_person7.obj' took 26.07 ms\n  [ComfyUI]   [BpyFBXExporter] Person 8: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9v9tqra_person8.obj' took 25.88 ms\n  [ComfyUI]   [BpyFBXExporter] Person 9: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9wududk_person9.obj' took 22.31 ms\n  [ComfyUI]   [BpyFBXExporter] Person 10: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpwhrdtol6_person10.obj' took 23.16 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_6'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_7'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_8'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_9'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_10'], 'POSE')\n  [ComfyUI]   export finished in 5.2529 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 47.55 seconds"
    },
    {
      "file": "frame_014.jpg",
      "time": 92.348965883255,
      "log": "Final screenshot"
    }
  ],
  "total_time": 71.98
}