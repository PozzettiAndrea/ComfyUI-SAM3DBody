<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComfyUI-SAM3DBody - Test Results</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            color: #eee;
            min-height: 100vh;
            line-height: 1.5;
        }

        header {
            background: #16213e;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid #0f3460;
        }

        h1 {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        h1 a {
            color: #fff;
            text-decoration: none;
        }

        h1 a:hover { color: #4da6ff; }

        .meta {
            color: #888;
            font-size: 0.9rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Summary Section */
        .summary {
            background: #16213e;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            background: #0f3460;
            border-radius: 4px;
            height: 24px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            background: linear-gradient(90deg, #00c853, #69f0ae);
            height: 100%;
            transition: width 0.3s ease;
        }

        .progress-fill.has-failures {
            background: linear-gradient(90deg, #00c853 0%, #00c853 100.0%, #ff5252 100.0%, #ff5252 100%);
            width: 100% !important;
        }

        .stats {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .stat-badge {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .stat-pass {
            background: rgba(0, 200, 83, 0.2);
            color: #69f0ae;
        }

        .stat-fail {
            background: rgba(255, 82, 82, 0.2);
            color: #ff8a80;
        }

        .stat-total {
            color: #888;
            font-size: 1rem;
        }

        /* Failed Section */
        .failed-section {
            background: rgba(255, 82, 82, 0.1);
            border: 1px solid rgba(255, 82, 82, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .failed-section h2 {
            color: #ff8a80;
            font-size: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .failed-item {
            background: #16213e;
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 0.5rem;
        }

        .failed-item:last-child {
            margin-bottom: 0;
        }

        .failed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .failed-name {
            font-weight: 600;
            color: #ff8a80;
        }

        .failed-duration {
            color: #888;
            font-size: 0.85rem;
        }

        .failed-error {
            background: #0f3460;
            padding: 0.75rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.85rem;
            color: #ffa;
            margin-bottom: 0.5rem;
        }

        .log-link {
            color: #4da6ff;
            text-decoration: none;
            font-size: 0.85rem;
        }

        .log-link:hover {
            text-decoration: underline;
        }

        /* Workflow Grid */
        .section-title {
            font-size: 1rem;
            color: #888;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .workflow-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }

        .workflow-card {
            background: #16213e;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .workflow-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .workflow-card.clickable {
            cursor: pointer;
        }

        .workflow-card.failed {
            border: 2px solid #ff5252;
            box-shadow: 0 0 8px rgba(255, 82, 82, 0.3);
        }

        .workflow-screenshot {
            width: 100%;
            aspect-ratio: 16/10;
            object-fit: cover;
            background: #0f3460;
            display: block;
        }

        .workflow-screenshot.placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #444;
            font-size: 0.85rem;
        }

        .workflow-info {
            padding: 0.75rem 1rem;
            border-top: 1px solid #0f3460;
        }

        .workflow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.25rem;
        }

        .workflow-name {
            font-weight: 500;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 60%;
        }

        .workflow-badge {
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .workflow-badge.pass {
            background: rgba(0, 200, 83, 0.2);
            color: #69f0ae;
        }

        .workflow-badge.fail {
            background: rgba(255, 82, 82, 0.2);
            color: #ff8a80;
        }

        .workflow-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: #666;
        }

        /* Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            justify-content: center;
            align-items: flex-start;
            padding: 2rem;
            overflow-y: auto;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            width: 100%;
            margin: auto;
        }

        .lightbox-content img {
            max-width: 100%;
            max-height: 60vh;
            object-fit: contain;
            border-radius: 4px;
            align-self: center;
        }

        .lightbox-close {
            position: fixed;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            color: #fff;
            cursor: pointer;
            opacity: 0.7;
            background: none;
            border: none;
            z-index: 1001;
        }

        .lightbox-close:hover {
            opacity: 1;
        }

        .lightbox-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: #16213e;
            border-radius: 4px;
            margin-top: 1rem;
        }

        .lightbox-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
        }

        .lightbox-hardware {
            display: block;
            font-size: 0.8rem;
            color: #888;
            margin-top: 0.25rem;
        }

        .lightbox-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .lightbox-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .lightbox-badge.pass {
            background: rgba(0, 200, 83, 0.2);
            color: #69f0ae;
        }

        .lightbox-badge.fail {
            background: rgba(255, 82, 82, 0.2);
            color: #ff8a80;
        }

        .lightbox-duration {
            color: #888;
            font-size: 0.9rem;
        }

        .lightbox-log {
            background: #0f3460;
            border-radius: 4px;
            padding: 1rem;
            margin-top: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.8rem;
            line-height: 1.4;
            white-space: pre-wrap;
            word-break: break-all;
            color: #ccc;
        }

        .lightbox-log::-webkit-scrollbar {
            width: 8px;
        }

        .lightbox-log::-webkit-scrollbar-track {
            background: #16213e;
            border-radius: 4px;
        }

        .lightbox-log::-webkit-scrollbar-thumb {
            background: #4da6ff;
            border-radius: 4px;
        }

        /* Video Player */
        .video-player {
            display: none;
            margin-top: 1rem;
            background: #1a1a2e;
            border-radius: 8px;
            padding: 1rem;
        }

        .video-player.active {
            display: block;
        }

        .video-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .video-play-btn {
            background: #4da6ff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .video-play-btn:hover {
            background: #3d8ee0;
        }

        .video-frame-counter {
            color: #888;
            font-size: 0.85rem;
        }

        .video-slider-container {
            padding: 15px 0;
        }

        /* noUiSlider customization */
        #video-slider {
            height: 6px;
            background: #333;
            border: none;
            box-shadow: none;
        }

        #video-slider .noUi-connect {
            background: #4da6ff;
        }

        #video-slider .noUi-handle {
            width: 16px;
            height: 16px;
            background: #4da6ff;
            border: none;
            border-radius: 50%;
            box-shadow: none;
            top: -5px;
            right: -8px;
            cursor: pointer;
        }

        #video-slider .noUi-handle:before,
        #video-slider .noUi-handle:after {
            display: none;
        }

        /* Pips (tick marks) */
        .noUi-pips {
            color: #666;
        }

        .noUi-marker {
            background: #4da6ff;
            width: 2px;
        }

        .noUi-marker-large {
            height: 12px;
        }

        .noUi-value {
            display: none;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: #666;
            font-size: 0.85rem;
        }

        footer a {
            color: #4da6ff;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .workflow-grid {
                grid-template-columns: 1fr;
            }

            .stats {
                flex-direction: column;
                align-items: flex-start;
            }
        }
        
    </style>
    <link href="https://cdn.jsdelivr.net/npm/nouislider@15/dist/nouislider.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15/dist/nouislider.min.js"></script>
</head>
<body>
    
    <header>
        <h1><a href="https://github.com/PozzettiAndrea/ComfyUI-SAM3DBody">ComfyUI-SAM3DBody</a> Test Results</h1>
        <p class="meta">2026-01-26 01:11 UTC</p>
    </header>

    <div class="container">
        <div class="summary">
            <div class="progress-bar">
                <div class="progress-fill" style="width: 100.0%"></div>
            </div>
            <div class="stats">
                <span class="stat-badge stat-pass">5 PASSED</span>
                
                <span class="stat-total">5/5 tests (100.0%)</span>
            </div>
        </div>

        

        <h2 class="section-title">All Workflows</h2>
        <div class="workflow-grid">
            
            <div class="workflow-card clickable " onclick="openLightboxByName('multiple_masks')">
                
                <img class="workflow-screenshot" src="screenshots/multiple_masks_executed.png"
                     alt="multiple_masks" loading="lazy">
            
                <div class="workflow-info">
                    <div class="workflow-header">
                        <span class="workflow-name" title="multiple_masks">multiple_masks</span>
                        <span class="workflow-badge pass">pass</span>
                    </div>
                    <div class="workflow-meta">
                        <span>121.80s</span>
                    </div>
                </div>
            </div>
        

            <div class="workflow-card clickable " onclick="openLightboxByName('multiple_masks_depthcorrected')">
                
                <img class="workflow-screenshot" src="screenshots/multiple_masks_depthcorrected_executed.png"
                     alt="multiple_masks_depthcorrected" loading="lazy">
            
                <div class="workflow-info">
                    <div class="workflow-header">
                        <span class="workflow-name" title="multiple_masks_depthcorrected">multiple_masks_depthcorrected</span>
                        <span class="workflow-badge pass">pass</span>
                    </div>
                    <div class="workflow-meta">
                        <span>122.30s</span>
                    </div>
                </div>
            </div>
        

            <div class="workflow-card clickable " onclick="openLightboxByName('rigged_mesh_manipulation')">
                
                <img class="workflow-screenshot" src="screenshots/rigged_mesh_manipulation_executed.png"
                     alt="rigged_mesh_manipulation" loading="lazy">
            
                <div class="workflow-info">
                    <div class="workflow-header">
                        <span class="workflow-name" title="rigged_mesh_manipulation">rigged_mesh_manipulation</span>
                        <span class="workflow-badge pass">pass</span>
                    </div>
                    <div class="workflow-meta">
                        <span>37.04s</span>
                    </div>
                </div>
            </div>
        

            <div class="workflow-card clickable " onclick="openLightboxByName('rigging')">
                
                <img class="workflow-screenshot" src="screenshots/rigging_executed.png"
                     alt="rigging" loading="lazy">
            
                <div class="workflow-info">
                    <div class="workflow-header">
                        <span class="workflow-name" title="rigging">rigging</span>
                        <span class="workflow-badge pass">pass</span>
                    </div>
                    <div class="workflow-meta">
                        <span>64.40s</span>
                    </div>
                </div>
            </div>
        

            <div class="workflow-card clickable " onclick="openLightboxByName('workflow')">
                
                <img class="workflow-screenshot" src="screenshots/workflow_executed.png"
                     alt="workflow" loading="lazy">
            
                <div class="workflow-info">
                    <div class="workflow-header">
                        <span class="workflow-name" title="workflow">workflow</span>
                        <span class="workflow-badge pass">pass</span>
                    </div>
                    <div class="workflow-meta">
                        <span>20.73s</span>
                    </div>
                </div>
            </div>
        
        </div>
    </div>

    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
            <div class="video-player" id="video-player">
                <div class="video-slider-container">
                    <div id="video-slider"></div>
                </div>
                <div class="video-controls">
                    <span class="video-frame-counter" id="video-frame-counter">0.0s / 0.0s</span>
                </div>
            </div>
            <div class="lightbox-info">
                <div>
                    <span class="lightbox-title" id="lightbox-title"></span>
                    <span class="lightbox-hardware" id="lightbox-hardware"></span>
                </div>
                <div class="lightbox-meta">
                    <span class="lightbox-badge" id="lightbox-badge"></span>
                    <span class="lightbox-duration" id="lightbox-duration"></span>
                </div>
            </div>
            <pre class="lightbox-log" id="lightbox-log"></pre>
        </div>
    </div>

    <footer>
        Generated by <a href="https://github.com/PozzettiAndrea/comfy-test">comfy-test</a>
    </footer>

    <script>
        // Store workflow data for hash-based linking
        const workflowData = {"multiple_masks": {"src": "screenshots/multiple_masks_executed.png", "title": "multiple_masks", "status": "pass", "duration": "121.80", "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 8 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": false, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0]}\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"people.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI] Generated prompt_id: b6beb2ee-21bb-4426-875b-d756eb8b58e1\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [SAM3DBody] Running prestartup script...\n  [ComfyUI] \n  [ComfyUI] Fetching 6 files:   0%|          | 0/6 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 6 files:  17%|\u2588\u258b        | 1/6 [00:00<00:02,  1.98it/s]\n  [ComfyUI] Fetching 6 files:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 4/6 [00:03<00:01,  1.21it/s]\n  [ComfyUI] Fetching 6 files:  83%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e | 5/6 [00:08<00:02,  2.18s/it]\n  [ComfyUI] Fetching 6 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 6/6 [00:08<00:00,  1.48s/it]\n  [ComfyUI]   [worker] Faulthandler enabled\n  [ComfyUI]   [worker] Starting...\n  [ComfyUI]   [worker] Connecting to unix:///dev/shm/comfy_worker_abc1ecba0b2e.sock...\n  [ComfyUI]   [worker] Connected, waiting for config...\n  [ComfyUI]   [worker] Got config, setting up paths...\n  [ComfyUI]   [worker] Importing torch...\n  [ComfyUI]   [worker] Torch imported: 2.10.0+cu128\n  [ComfyUI]   [worker] Ready, entering request loop...\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0be577b_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [stderr] /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/nodes/sam_3d_body/models/heads/mhr_head.py:33: UserWarning: Momentum is not enabled\n  [ComfyUI]   [stderr]   warnings.warn(\"Momentum is not enabled\")\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0e6b3b7_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpt7wqx4yt_person0.obj' took 24.99 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpmetpn2qj_person1.obj' took 23.53 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpt5v0cxkz_person2.obj' took 22.98 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmph2vcm08r_person3.obj' took 34.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpvy35r7p4_person4.obj' took 22.83 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpeee97oeo_person5.obj' took 23.63 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   export finished in 2.8251 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 70.58 seconds\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels (this message will no longer repeat)\n  Captured 331 frames over 85.22s\n  8 unique frames saved as WebP\n  Waiting 5000ms for previews to render...\n  Saved high-quality screenshot: multiple_masks_executed.png\n    Captured 9 video frames", "hardware": {"os": "Linux-5.15.0-164-generic-x86_64-with-glibc2.35", "cpu": "AMD EPYC 7B12 64-Core Processor", "gpu": "NVIDIA L40S"}}, "multiple_masks_depthcorrected": {"src": "screenshots/multiple_masks_depthcorrected_executed.png", "title": "multiple_masks_depthcorrected", "status": "pass", "duration": "122.30", "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 6 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 7 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 8 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 9 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 10 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Using DA3 intrinsics: fx=2977.0, fy=2604.2\n  [ComfyUI]   [SAM3DBody] Image: 1200x497, Depth map: 1200x496\n  [ComfyUI]   [SAM3DBody] Person 0:\n  [ComfyUI]     mesh_height=1.265m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 39 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1009, max=0.1133, mean=0.1045\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 39/39, confidence=0.069\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.069\n  [ComfyUI]         visible_joints=39, occluded_joints=31\n  [ComfyUI]         median_depth=1.1322896480560303\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=39, occluded_joints=31, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1:\n  [ComfyUI]     mesh_height=1.443m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 15 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0992, max=0.1084, mean=0.1039\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 15/15, confidence=0.626\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.626\n  [ComfyUI]         visible_joints=15, occluded_joints=55\n  [ComfyUI]         median_depth=0.8624514937400818\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=15, occluded_joints=55, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2:\n  [ComfyUI]     mesh_height=1.643m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1490, max=0.1603, mean=0.1540\n  [ComfyUI]         Median ratio (scale factor): 0.1547\n  [ComfyUI]         Inliers: 13/13, confidence=0.545\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1547, confidence=0.545\n  [ComfyUI]         visible_joints=13, occluded_joints=57\n  [ComfyUI]         median_depth=0.9505064487457275\n  [ComfyUI]     [intrinsics method] scale=0.155, visible_joints=13, occluded_joints=57, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3:\n  [ComfyUI]     mesh_height=1.494m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 14 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0945, max=0.1015, mean=0.0972\n  [ComfyUI]         Median ratio (scale factor): 0.0966\n  [ComfyUI]         Inliers: 14/14, confidence=0.000\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0966, confidence=0.000\n  [ComfyUI]         visible_joints=14, occluded_joints=56\n  [ComfyUI]         median_depth=1.3449103832244873\n  [ComfyUI]     [intrinsics method] scale=0.097, visible_joints=14, occluded_joints=56, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4:\n  [ComfyUI]     mesh_height=1.649m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1395, max=0.2134, mean=0.1505\n  [ComfyUI]         Median ratio (scale factor): 0.1431\n  [ComfyUI]           Joint 2: ratio=0.2134, rel_error=0.492 -> OUTLIER\n  [ComfyUI]         Inliers: 12/13, confidence=0.544\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1431, confidence=0.544\n  [ComfyUI]         visible_joints=12, occluded_joints=58\n  [ComfyUI]         median_depth=0.9796111583709717\n  [ComfyUI]     [intrinsics method] scale=0.143, visible_joints=12, occluded_joints=58, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5:\n  [ComfyUI]     mesh_height=1.606m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 32 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1213, max=0.1404, mean=0.1275\n  [ComfyUI]         Median ratio (scale factor): 0.1251\n  [ComfyUI]         Inliers: 32/32, confidence=0.488\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1251, confidence=0.488\n  [ComfyUI]         visible_joints=32, occluded_joints=38\n  [ComfyUI]         median_depth=1.008958339691162\n  [ComfyUI]     [intrinsics method] scale=0.125, visible_joints=32, occluded_joints=38, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6:\n  [ComfyUI]     mesh_height=1.485m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 9 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0921, max=0.0970, mean=0.0946\n  [ComfyUI]         Median ratio (scale factor): 0.0942\n  [ComfyUI]         Inliers: 9/9, confidence=0.701\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0942, confidence=0.701\n  [ComfyUI]         visible_joints=9, occluded_joints=61\n  [ComfyUI]         median_depth=0.9265626072883606\n  [ComfyUI]     [intrinsics method] scale=0.094, visible_joints=9, occluded_joints=61, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7:\n  [ComfyUI]     mesh_height=1.594m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 31 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0962, max=0.1042, mean=0.0999\n  [ComfyUI]         Median ratio (scale factor): 0.0997\n  [ComfyUI]         Inliers: 31/31, confidence=0.674\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0997, confidence=0.674\n  [ComfyUI]         visible_joints=31, occluded_joints=39\n  [ComfyUI]         median_depth=0.8953904509544373\n  [ComfyUI]     [intrinsics method] scale=0.100, visible_joints=31, occluded_joints=39, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8:\n  [ComfyUI]     mesh_height=1.661m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 60 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1334, max=0.2002, mean=0.1412\n  [ComfyUI]         Median ratio (scale factor): 0.1416\n  [ComfyUI]           Joint 67: ratio=0.2002, rel_error=0.414 -> OUTLIER\n  [ComfyUI]         Inliers: 59/60, confidence=0.577\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1416, confidence=0.577\n  [ComfyUI]         visible_joints=59, occluded_joints=11\n  [ComfyUI]         median_depth=0.8718128800392151\n  [ComfyUI]     [intrinsics method] scale=0.142, visible_joints=59, occluded_joints=11, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9:\n  [ComfyUI]     mesh_height=1.499m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 34 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1042, max=0.1123, mean=0.1091\n  [ComfyUI]         Median ratio (scale factor): 0.1100\n  [ComfyUI]         Inliers: 34/34, confidence=0.628\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1100, confidence=0.628\n  [ComfyUI]         visible_joints=34, occluded_joints=36\n  [ComfyUI]         median_depth=0.9202026128768921\n  [ComfyUI]     [intrinsics method] scale=0.110, visible_joints=34, occluded_joints=36, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10:\n  [ComfyUI]     mesh_height=1.508m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 16 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0942, max=0.1016, mean=0.0982\n  [ComfyUI]         Median ratio (scale factor): 0.0982\n  [ComfyUI]         Inliers: 16/16, confidence=0.666\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0982, confidence=0.666\n  [ComfyUI]         visible_joints=16, occluded_joints=54\n  [ComfyUI]         median_depth=0.8790579438209534\n  [ComfyUI]     [intrinsics method] scale=0.098, visible_joints=16, occluded_joints=54, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Median scale: 0.103\n  [ComfyUI]   [SAM3DBody] Person 0 final: scale=1.000, height=1.26m, tz=1.13, method=intrinsics_visibility, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1 final: scale=1.000, height=1.44m, tz=0.86, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2 final: scale=1.500, height=2.46m, tz=0.95, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3 final: scale=0.937, height=1.40m, tz=1.34, method=intrinsics_visibility, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4 final: scale=1.388, height=2.29m, tz=0.98, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5 final: scale=1.214, height=1.95m, tz=1.01, method=intrinsics_visibility, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6 final: scale=0.914, height=1.36m, tz=0.93, method=intrinsics_visibility, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7 final: scale=0.966, height=1.54m, tz=0.90, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8 final: scale=1.373, height=2.28m, tz=0.87, method=intrinsics_visibility, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9 final: scale=1.067, height=1.60m, tz=0.92, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10 final: scale=0.953, height=1.44m, tz=0.88, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_8dddf901_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmplpg4znbb_person0.obj' took 22.70 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmprj_8xmpi_person1.obj' took 24.04 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpu6qin_8s_person2.obj' took 38.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpjnjux039_person3.obj' took 25.49 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpg7zgylzr_person4.obj' took 24.65 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpux4gf70q_person5.obj' took 26.78 ms\n  [ComfyUI]   [BpyFBXExporter] Person 6: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmptuihhro6_person6.obj' took 23.37 ms\n  [ComfyUI]   [BpyFBXExporter] Person 7: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpxxijr5ou_person7.obj' took 26.07 ms\n  [ComfyUI]   [BpyFBXExporter] Person 8: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9v9tqra_person8.obj' took 25.88 ms\n  [ComfyUI]   [BpyFBXExporter] Person 9: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9wududk_person9.obj' took 22.31 ms\n  [ComfyUI]   [BpyFBXExporter] Person 10: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpwhrdtol6_person10.obj' took 23.16 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_6'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_7'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_8'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_9'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_10'], 'POSE')\n  [ComfyUI]   export finished in 5.2529 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 47.55 seconds\n  Captured 208 frames over 71.98s\n  14 unique frames saved as WebP\n  Waiting 5000ms for previews to render...\n  Saved high-quality screenshot: multiple_masks_depthcorrected_executed.png\n    Captured 15 video frames", "hardware": {"os": "Linux-5.15.0-164-generic-x86_64-with-glibc2.35", "cpu": "AMD EPYC 7B12 64-Core Processor", "gpu": "NVIDIA L40S"}}, "rigged_mesh_manipulation": {"src": "screenshots/rigged_mesh_manipulation_executed.png", "title": "rigged_mesh_manipulation", "status": "pass", "duration": "37.04", "log": "Capturing execution frames: rigged_mesh_manipulation.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0901800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] Parent element not found\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0C0D902C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  Queuing workflow for execution...\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 2 nodes\n  [ComfyUI]   Node 2: SAM3DBodyPreviewRiggedMesh\n  [ComfyUI]     Inputs: {\"fbx_output_path\": [\"4\", 0], \"preview\": \"\"}\n  [ComfyUI]   Node 4: SAM3DBodySelectMesh\n  [ComfyUI]     Inputs: {\"source_folder\": \"input\", \"file_path\": \"sam3d_rigged.fbx\"}\n  [ComfyUI] Generated prompt_id: 866a57e6-c08e-4845-867d-55e1b086a5cb\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  [ComfyUI] got prompt\n  [ComfyUI] Prompt executed in 0.16 seconds\n  Captured 4 frames over 4.61s\n  3 unique frames saved as WebP\n  Waiting 5000ms for previews to render...\n  Saved high-quality screenshot: rigged_mesh_manipulation_executed.png\n    Captured 4 video frames", "hardware": {"os": "Linux-5.15.0-164-generic-x86_64-with-glibc2.35", "cpu": "AMD EPYC 7B12 64-Core Processor", "gpu": "NVIDIA L40S"}}, "rigging": {"src": "screenshots/rigging_executed.png", "title": "rigging", "status": "pass", "duration": "64.40", "log": "Capturing execution frames: rigging.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"10\", 2]}\n  [ComfyUI]   Node 10: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"15\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 12: SAM3DBodyExportFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_rigged.fbx\", \"mesh_data\": [\"10\", 0]}\n  [ComfyUI]   Node 13: SAM3DBodyPreviewRiggedMesh\n  [ComfyUI]     Inputs: {\"fbx_output_path\": [\"12\", 0], \"preview\": \"\"}\n  [ComfyUI]   Node 15: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 53a5f920-0a8d-4d3c-819b-61139cfe9de7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  Queuing workflow for execution...\n  [ComfyUI] === Validation PASSED ===\n  [ComfyUI] got prompt\n  [ComfyUI]   [worker] Request: call_method process\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_03c794a0_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'bbox_threshold', 'inference_type', 'mask']\n  [ComfyUI]   [worker] Importing module process...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcess...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process...\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_24bc34d1_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   OBJ import of 'temp_mesh_1769389844.obj' took 23.38 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton'], 'POSE')\n  [ComfyUI]   export finished in 0.5406 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 37.87 seconds\n  Captured 102 frames over 42.49s\n  5 unique frames saved as WebP\n  Waiting 5000ms for previews to render...\n  Saved high-quality screenshot: rigging_executed.png\n    Captured 6 video frames", "hardware": {"os": "Linux-5.15.0-164-generic-x86_64-with-glibc2.35", "cpu": "AMD EPYC 7B12 64-Core Processor", "gpu": "NVIDIA L40S"}}, "workflow": {"src": "screenshots/workflow_executed.png", "title": "workflow", "status": "pass", "duration": "20.73", "log": "Capturing execution frames: workflow.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 2: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"11\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"2\", 2]}\n  [ComfyUI]   Node 7: SAM3DBodyExportMesh\n  [ComfyUI]     Inputs: {\"filename\": \"output_mesh.stl\", \"mesh_data\": [\"2\", 0]}\n  [ComfyUI]   Node 10: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"7\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 11: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 03cd8d21-8a86-4115-b709-7c2f421f8057\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] Prompt executed in 2.84 seconds\n  Captured 16 frames over 6.06s\n  4 unique frames saved as WebP\n  Waiting 5000ms for previews to render...\n  Saved high-quality screenshot: workflow_executed.png\n    Captured 5 video frames", "hardware": {"os": "Linux-5.15.0-164-generic-x86_64-with-glibc2.35", "cpu": "AMD EPYC 7B12 64-Core Processor", "gpu": "NVIDIA L40S"}}};

        // Store video metadata (frames with timestamps and logs)
        const videoData = {"workflow": {"frames": [{"file": "frame_000.jpg", "time": 0.0, "log": "Capturing execution frames: workflow.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758"}, {"file": "frame_001.jpg", "time": 0.29, "log": "Capturing execution frames: workflow.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 2: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"11\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"2\", 2]}\n  [ComfyUI]   Node 7: SAM3DBodyExportMesh\n  [ComfyUI]     Inputs: {\"filename\": \"output_mesh.stl\", \"mesh_data\": [\"2\", 0]}\n  [ComfyUI]   Node 10: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"7\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 11: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 03cd8d21-8a86-4115-b709-7c2f421f8057\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt"}, {"file": "frame_002.jpg", "time": 0.62, "log": "Capturing execution frames: workflow.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 2: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"11\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"2\", 2]}\n  [ComfyUI]   Node 7: SAM3DBodyExportMesh\n  [ComfyUI]     Inputs: {\"filename\": \"output_mesh.stl\", \"mesh_data\": [\"2\", 0]}\n  [ComfyUI]   Node 10: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"7\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 11: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 03cd8d21-8a86-4115-b709-7c2f421f8057\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt"}, {"file": "frame_003.jpg", "time": 3.53, "log": "Capturing execution frames: workflow.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0001608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=output_mesh.stl\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 2: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"11\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"2\", 2]}\n  [ComfyUI]   Node 7: SAM3DBodyExportMesh\n  [ComfyUI]     Inputs: {\"filename\": \"output_mesh.stl\", \"mesh_data\": [\"2\", 0]}\n  [ComfyUI]   Node 10: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"7\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 11: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 03cd8d21-8a86-4115-b709-7c2f421f8057\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] Prompt executed in 2.84 seconds"}, {"file": "frame_004.jpg", "time": 14.56821608543396, "log": "Final screenshot"}], "total_time": 6.06}, "multiple_masks": {"frames": [{"file": "frame_000.jpg", "time": 0.0, "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels"}, {"file": "frame_001.jpg", "time": 0.27, "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 8 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": false, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0]}\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"people.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI] Generated prompt_id: b6beb2ee-21bb-4426-875b-d756eb8b58e1\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [SAM3DBody] Running prestartup script...\n  [ComfyUI] "}, {"file": "frame_002.jpg", "time": 9.42, "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 8 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": false, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0]}\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"people.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI] Generated prompt_id: b6beb2ee-21bb-4426-875b-d756eb8b58e1\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [SAM3DBody] Running prestartup script...\n  [ComfyUI] \n  [ComfyUI] Fetching 6 files:   0%|          | 0/6 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 6 files:  17%|\u2588\u258b        | 1/6 [00:00<00:02,  1.98it/s]\n  [ComfyUI] Fetching 6 files:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 4/6 [00:03<00:01,  1.21it/s]\n  [ComfyUI] Fetching 6 files:  83%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e | 5/6 [00:08<00:02,  2.18s/it]"}, {"file": "frame_003.jpg", "time": 9.69, "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 8 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": false, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0]}\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"people.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI] Generated prompt_id: b6beb2ee-21bb-4426-875b-d756eb8b58e1\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [SAM3DBody] Running prestartup script...\n  [ComfyUI] \n  [ComfyUI] Fetching 6 files:   0%|          | 0/6 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 6 files:  17%|\u2588\u258b        | 1/6 [00:00<00:02,  1.98it/s]\n  [ComfyUI] Fetching 6 files:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 4/6 [00:03<00:01,  1.21it/s]\n  [ComfyUI] Fetching 6 files:  83%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e | 5/6 [00:08<00:02,  2.18s/it]\n  [ComfyUI] Fetching 6 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 6/6 [00:08<00:00,  1.48s/it]\n  [ComfyUI]   [worker] Faulthandler enabled\n  [ComfyUI]   [worker] Starting...\n  [ComfyUI]   [worker] Connecting to unix:///dev/shm/comfy_worker_abc1ecba0b2e.sock...\n  [ComfyUI]   [worker] Connected, waiting for config...\n  [ComfyUI]   [worker] Got config, setting up paths..."}, {"file": "frame_004.jpg", "time": 59.63, "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 8 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": false, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0]}\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"people.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI] Generated prompt_id: b6beb2ee-21bb-4426-875b-d756eb8b58e1\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [SAM3DBody] Running prestartup script...\n  [ComfyUI] \n  [ComfyUI] Fetching 6 files:   0%|          | 0/6 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 6 files:  17%|\u2588\u258b        | 1/6 [00:00<00:02,  1.98it/s]\n  [ComfyUI] Fetching 6 files:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 4/6 [00:03<00:01,  1.21it/s]\n  [ComfyUI] Fetching 6 files:  83%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e | 5/6 [00:08<00:02,  2.18s/it]\n  [ComfyUI] Fetching 6 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 6/6 [00:08<00:00,  1.48s/it]\n  [ComfyUI]   [worker] Faulthandler enabled\n  [ComfyUI]   [worker] Starting...\n  [ComfyUI]   [worker] Connecting to unix:///dev/shm/comfy_worker_abc1ecba0b2e.sock...\n  [ComfyUI]   [worker] Connected, waiting for config...\n  [ComfyUI]   [worker] Got config, setting up paths...\n  [ComfyUI]   [worker] Importing torch...\n  [ComfyUI]   [worker] Torch imported: 2.10.0+cu128\n  [ComfyUI]   [worker] Ready, entering request loop...\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0be577b_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [stderr] /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/nodes/sam_3d_body/models/heads/mhr_head.py:33: UserWarning: Momentum is not enabled\n  [ComfyUI]   [stderr]   warnings.warn(\"Momentum is not enabled\")\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [worker] Method returned"}, {"file": "frame_005.jpg", "time": 70.91, "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 8 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": false, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0]}\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"people.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI] Generated prompt_id: b6beb2ee-21bb-4426-875b-d756eb8b58e1\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [SAM3DBody] Running prestartup script...\n  [ComfyUI] \n  [ComfyUI] Fetching 6 files:   0%|          | 0/6 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 6 files:  17%|\u2588\u258b        | 1/6 [00:00<00:02,  1.98it/s]\n  [ComfyUI] Fetching 6 files:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 4/6 [00:03<00:01,  1.21it/s]\n  [ComfyUI] Fetching 6 files:  83%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e | 5/6 [00:08<00:02,  2.18s/it]\n  [ComfyUI] Fetching 6 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 6/6 [00:08<00:00,  1.48s/it]\n  [ComfyUI]   [worker] Faulthandler enabled\n  [ComfyUI]   [worker] Starting...\n  [ComfyUI]   [worker] Connecting to unix:///dev/shm/comfy_worker_abc1ecba0b2e.sock...\n  [ComfyUI]   [worker] Connected, waiting for config...\n  [ComfyUI]   [worker] Got config, setting up paths...\n  [ComfyUI]   [worker] Importing torch...\n  [ComfyUI]   [worker] Torch imported: 2.10.0+cu128\n  [ComfyUI]   [worker] Ready, entering request loop...\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0be577b_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [stderr] /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/nodes/sam_3d_body/models/heads/mhr_head.py:33: UserWarning: Momentum is not enabled\n  [ComfyUI]   [stderr]   warnings.warn(\"Momentum is not enabled\")\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0e6b3b7_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpt7wqx4yt_person0.obj' took 24.99 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpmetpn2qj_person1.obj' took 23.53 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpt5v0cxkz_person2.obj' took 22.98 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmph2vcm08r_person3.obj' took 34.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpvy35r7p4_person4.obj' took 22.83 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpeee97oeo_person5.obj' took 23.63 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   export finished in 2.8251 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 70.58 seconds\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels (this message will no longer repeat)"}, {"file": "frame_006.jpg", "time": 77.25, "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 8 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": false, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0]}\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"people.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI] Generated prompt_id: b6beb2ee-21bb-4426-875b-d756eb8b58e1\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [SAM3DBody] Running prestartup script...\n  [ComfyUI] \n  [ComfyUI] Fetching 6 files:   0%|          | 0/6 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 6 files:  17%|\u2588\u258b        | 1/6 [00:00<00:02,  1.98it/s]\n  [ComfyUI] Fetching 6 files:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 4/6 [00:03<00:01,  1.21it/s]\n  [ComfyUI] Fetching 6 files:  83%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e | 5/6 [00:08<00:02,  2.18s/it]\n  [ComfyUI] Fetching 6 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 6/6 [00:08<00:00,  1.48s/it]\n  [ComfyUI]   [worker] Faulthandler enabled\n  [ComfyUI]   [worker] Starting...\n  [ComfyUI]   [worker] Connecting to unix:///dev/shm/comfy_worker_abc1ecba0b2e.sock...\n  [ComfyUI]   [worker] Connected, waiting for config...\n  [ComfyUI]   [worker] Got config, setting up paths...\n  [ComfyUI]   [worker] Importing torch...\n  [ComfyUI]   [worker] Torch imported: 2.10.0+cu128\n  [ComfyUI]   [worker] Ready, entering request loop...\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0be577b_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [stderr] /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/nodes/sam_3d_body/models/heads/mhr_head.py:33: UserWarning: Momentum is not enabled\n  [ComfyUI]   [stderr]   warnings.warn(\"Momentum is not enabled\")\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0e6b3b7_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpt7wqx4yt_person0.obj' took 24.99 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpmetpn2qj_person1.obj' took 23.53 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpt5v0cxkz_person2.obj' took 22.98 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmph2vcm08r_person3.obj' took 34.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpvy35r7p4_person4.obj' took 22.83 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpeee97oeo_person5.obj' took 23.63 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   export finished in 2.8251 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 70.58 seconds\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels (this message will no longer repeat)"}, {"file": "frame_007.jpg", "time": 85.03, "log": "Capturing execution frames: multiple_masks.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Error loading model: zy: fetch for \"http://127.0.0.1:8188/api/view?type=output&subfolder=&filename=sam3d_multi_rigged.fbx\" responded with 404: Not Found\n    at http://127.0.0.1:8188/assets/vendor-three-DH0o8VQ7.js:3824:114758\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 8 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": false, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0]}\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\"}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"people.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI] Generated prompt_id: b6beb2ee-21bb-4426-875b-d756eb8b58e1\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [SAM3DBody] Running prestartup script...\n  [ComfyUI] \n  [ComfyUI] Fetching 6 files:   0%|          | 0/6 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 6 files:  17%|\u2588\u258b        | 1/6 [00:00<00:02,  1.98it/s]\n  [ComfyUI] Fetching 6 files:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 4/6 [00:03<00:01,  1.21it/s]\n  [ComfyUI] Fetching 6 files:  83%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e | 5/6 [00:08<00:02,  2.18s/it]\n  [ComfyUI] Fetching 6 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 6/6 [00:08<00:00,  1.48s/it]\n  [ComfyUI]   [worker] Faulthandler enabled\n  [ComfyUI]   [worker] Starting...\n  [ComfyUI]   [worker] Connecting to unix:///dev/shm/comfy_worker_abc1ecba0b2e.sock...\n  [ComfyUI]   [worker] Connected, waiting for config...\n  [ComfyUI]   [worker] Got config, setting up paths...\n  [ComfyUI]   [worker] Importing torch...\n  [ComfyUI]   [worker] Torch imported: 2.10.0+cu128\n  [ComfyUI]   [worker] Ready, entering request loop...\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0be577b_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [stderr] /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/nodes/sam_3d_body/models/heads/mhr_head.py:33: UserWarning: Momentum is not enabled\n  [ComfyUI]   [stderr]   warnings.warn(\"Momentum is not enabled\")\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_e0e6b3b7_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpt7wqx4yt_person0.obj' took 24.99 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpmetpn2qj_person1.obj' took 23.53 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpt5v0cxkz_person2.obj' took 22.98 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmph2vcm08r_person3.obj' took 34.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpvy35r7p4_person4.obj' took 22.83 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpeee97oeo_person5.obj' took 23.63 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   export finished in 2.8251 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 70.58 seconds\n  [Console-warning] [.WebGL-0x2bfc0adf1e00]GL Driver Message (OpenGL, Performance, GL_CLOSE_PATH_NV, High): GPU stall due to ReadPixels (this message will no longer repeat)"}, {"file": "frame_008.jpg", "time": 115.95896077156067, "log": "Final screenshot"}], "total_time": 85.22}, "multiple_masks_depthcorrected": {"frames": [{"file": "frame_000.jpg", "time": 0.0, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content."}, {"file": "frame_001.jpg", "time": 0.27, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt"}, {"file": "frame_002.jpg", "time": 0.86, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt"}, {"file": "frame_003.jpg", "time": 1.06, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete."}, {"file": "frame_004.jpg", "time": 1.3, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete."}, {"file": "frame_005.jpg", "time": 15.96, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians"}, {"file": "frame_006.jpg", "time": 16.29, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians"}, {"file": "frame_007.jpg", "time": 18.65, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values="}, {"file": "frame_008.jpg", "time": 18.94, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values="}, {"file": "frame_009.jpg", "time": 23.25, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]"}, {"file": "frame_010.jpg", "time": 23.58, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]"}, {"file": "frame_011.jpg", "time": 29.42, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 6 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 7 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 8 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 9 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 10 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Using DA3 intrinsics: fx=2977.0, fy=2604.2\n  [ComfyUI]   [SAM3DBody] Image: 1200x497, Depth map: 1200x496\n  [ComfyUI]   [SAM3DBody] Person 0:\n  [ComfyUI]     mesh_height=1.265m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 39 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1009, max=0.1133, mean=0.1045\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 39/39, confidence=0.069\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.069\n  [ComfyUI]         visible_joints=39, occluded_joints=31\n  [ComfyUI]         median_depth=1.1322896480560303\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=39, occluded_joints=31, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1:\n  [ComfyUI]     mesh_height=1.443m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 15 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0992, max=0.1084, mean=0.1039\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 15/15, confidence=0.626\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.626\n  [ComfyUI]         visible_joints=15, occluded_joints=55\n  [ComfyUI]         median_depth=0.8624514937400818\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=15, occluded_joints=55, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2:\n  [ComfyUI]     mesh_height=1.643m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1490, max=0.1603, mean=0.1540\n  [ComfyUI]         Median ratio (scale factor): 0.1547\n  [ComfyUI]         Inliers: 13/13, confidence=0.545\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1547, confidence=0.545\n  [ComfyUI]         visible_joints=13, occluded_joints=57\n  [ComfyUI]         median_depth=0.9505064487457275\n  [ComfyUI]     [intrinsics method] scale=0.155, visible_joints=13, occluded_joints=57, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3:\n  [ComfyUI]     mesh_height=1.494m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 14 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0945, max=0.1015, mean=0.0972\n  [ComfyUI]         Median ratio (scale factor): 0.0966\n  [ComfyUI]         Inliers: 14/14, confidence=0.000\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0966, confidence=0.000\n  [ComfyUI]         visible_joints=14, occluded_joints=56\n  [ComfyUI]         median_depth=1.3449103832244873\n  [ComfyUI]     [intrinsics method] scale=0.097, visible_joints=14, occluded_joints=56, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4:\n  [ComfyUI]     mesh_height=1.649m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1395, max=0.2134, mean=0.1505\n  [ComfyUI]         Median ratio (scale factor): 0.1431\n  [ComfyUI]           Joint 2: ratio=0.2134, rel_error=0.492 -> OUTLIER\n  [ComfyUI]         Inliers: 12/13, confidence=0.544\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1431, confidence=0.544\n  [ComfyUI]         visible_joints=12, occluded_joints=58\n  [ComfyUI]         median_depth=0.9796111583709717\n  [ComfyUI]     [intrinsics method] scale=0.143, visible_joints=12, occluded_joints=58, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5:\n  [ComfyUI]     mesh_height=1.606m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 32 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1213, max=0.1404, mean=0.1275\n  [ComfyUI]         Median ratio (scale factor): 0.1251\n  [ComfyUI]         Inliers: 32/32, confidence=0.488\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1251, confidence=0.488\n  [ComfyUI]         visible_joints=32, occluded_joints=38\n  [ComfyUI]         median_depth=1.008958339691162\n  [ComfyUI]     [intrinsics method] scale=0.125, visible_joints=32, occluded_joints=38, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6:\n  [ComfyUI]     mesh_height=1.485m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 9 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0921, max=0.0970, mean=0.0946\n  [ComfyUI]         Median ratio (scale factor): 0.0942\n  [ComfyUI]         Inliers: 9/9, confidence=0.701\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0942, confidence=0.701\n  [ComfyUI]         visible_joints=9, occluded_joints=61\n  [ComfyUI]         median_depth=0.9265626072883606\n  [ComfyUI]     [intrinsics method] scale=0.094, visible_joints=9, occluded_joints=61, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7:\n  [ComfyUI]     mesh_height=1.594m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 31 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0962, max=0.1042, mean=0.0999\n  [ComfyUI]         Median ratio (scale factor): 0.0997\n  [ComfyUI]         Inliers: 31/31, confidence=0.674\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0997, confidence=0.674\n  [ComfyUI]         visible_joints=31, occluded_joints=39\n  [ComfyUI]         median_depth=0.8953904509544373\n  [ComfyUI]     [intrinsics method] scale=0.100, visible_joints=31, occluded_joints=39, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8:\n  [ComfyUI]     mesh_height=1.661m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 60 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1334, max=0.2002, mean=0.1412\n  [ComfyUI]         Median ratio (scale factor): 0.1416\n  [ComfyUI]           Joint 67: ratio=0.2002, rel_error=0.414 -> OUTLIER\n  [ComfyUI]         Inliers: 59/60, confidence=0.577\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1416, confidence=0.577\n  [ComfyUI]         visible_joints=59, occluded_joints=11\n  [ComfyUI]         median_depth=0.8718128800392151\n  [ComfyUI]     [intrinsics method] scale=0.142, visible_joints=59, occluded_joints=11, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9:\n  [ComfyUI]     mesh_height=1.499m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 34 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1042, max=0.1123, mean=0.1091\n  [ComfyUI]         Median ratio (scale factor): 0.1100\n  [ComfyUI]         Inliers: 34/34, confidence=0.628\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1100, confidence=0.628\n  [ComfyUI]         visible_joints=34, occluded_joints=36\n  [ComfyUI]         median_depth=0.9202026128768921\n  [ComfyUI]     [intrinsics method] scale=0.110, visible_joints=34, occluded_joints=36, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10:\n  [ComfyUI]     mesh_height=1.508m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 16 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0942, max=0.1016, mean=0.0982\n  [ComfyUI]         Median ratio (scale factor): 0.0982\n  [ComfyUI]         Inliers: 16/16, confidence=0.666\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0982, confidence=0.666\n  [ComfyUI]         visible_joints=16, occluded_joints=54\n  [ComfyUI]         median_depth=0.8790579438209534\n  [ComfyUI]     [intrinsics method] scale=0.098, visible_joints=16, occluded_joints=54, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Median scale: 0.103\n  [ComfyUI]   [SAM3DBody] Person 0 final: scale=1.000, height=1.26m, tz=1.13, method=intrinsics_visibility, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1 final: scale=1.000, height=1.44m, tz=0.86, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2 final: scale=1.500, height=2.46m, tz=0.95, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3 final: scale=0.937, height=1.40m, tz=1.34, method=intrinsics_visibility, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4 final: scale=1.388, height=2.29m, tz=0.98, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5 final: scale=1.214, height=1.95m, tz=1.01, method=intrinsics_visibility, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6 final: scale=0.914, height=1.36m, tz=0.93, method=intrinsics_visibility, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7 final: scale=0.966, height=1.54m, tz=0.90, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8 final: scale=1.373, height=2.28m, tz=0.87, method=intrinsics_visibility, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9 final: scale=1.067, height=1.60m, tz=0.92, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10 final: scale=0.953, height=1.44m, tz=0.88, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [worker] Method returned"}, {"file": "frame_012.jpg", "time": 47.95, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 6 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 7 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 8 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 9 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 10 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Using DA3 intrinsics: fx=2977.0, fy=2604.2\n  [ComfyUI]   [SAM3DBody] Image: 1200x497, Depth map: 1200x496\n  [ComfyUI]   [SAM3DBody] Person 0:\n  [ComfyUI]     mesh_height=1.265m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 39 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1009, max=0.1133, mean=0.1045\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 39/39, confidence=0.069\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.069\n  [ComfyUI]         visible_joints=39, occluded_joints=31\n  [ComfyUI]         median_depth=1.1322896480560303\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=39, occluded_joints=31, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1:\n  [ComfyUI]     mesh_height=1.443m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 15 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0992, max=0.1084, mean=0.1039\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 15/15, confidence=0.626\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.626\n  [ComfyUI]         visible_joints=15, occluded_joints=55\n  [ComfyUI]         median_depth=0.8624514937400818\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=15, occluded_joints=55, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2:\n  [ComfyUI]     mesh_height=1.643m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1490, max=0.1603, mean=0.1540\n  [ComfyUI]         Median ratio (scale factor): 0.1547\n  [ComfyUI]         Inliers: 13/13, confidence=0.545\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1547, confidence=0.545\n  [ComfyUI]         visible_joints=13, occluded_joints=57\n  [ComfyUI]         median_depth=0.9505064487457275\n  [ComfyUI]     [intrinsics method] scale=0.155, visible_joints=13, occluded_joints=57, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3:\n  [ComfyUI]     mesh_height=1.494m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 14 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0945, max=0.1015, mean=0.0972\n  [ComfyUI]         Median ratio (scale factor): 0.0966\n  [ComfyUI]         Inliers: 14/14, confidence=0.000\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0966, confidence=0.000\n  [ComfyUI]         visible_joints=14, occluded_joints=56\n  [ComfyUI]         median_depth=1.3449103832244873\n  [ComfyUI]     [intrinsics method] scale=0.097, visible_joints=14, occluded_joints=56, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4:\n  [ComfyUI]     mesh_height=1.649m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1395, max=0.2134, mean=0.1505\n  [ComfyUI]         Median ratio (scale factor): 0.1431\n  [ComfyUI]           Joint 2: ratio=0.2134, rel_error=0.492 -> OUTLIER\n  [ComfyUI]         Inliers: 12/13, confidence=0.544\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1431, confidence=0.544\n  [ComfyUI]         visible_joints=12, occluded_joints=58\n  [ComfyUI]         median_depth=0.9796111583709717\n  [ComfyUI]     [intrinsics method] scale=0.143, visible_joints=12, occluded_joints=58, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5:\n  [ComfyUI]     mesh_height=1.606m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 32 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1213, max=0.1404, mean=0.1275\n  [ComfyUI]         Median ratio (scale factor): 0.1251\n  [ComfyUI]         Inliers: 32/32, confidence=0.488\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1251, confidence=0.488\n  [ComfyUI]         visible_joints=32, occluded_joints=38\n  [ComfyUI]         median_depth=1.008958339691162\n  [ComfyUI]     [intrinsics method] scale=0.125, visible_joints=32, occluded_joints=38, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6:\n  [ComfyUI]     mesh_height=1.485m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 9 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0921, max=0.0970, mean=0.0946\n  [ComfyUI]         Median ratio (scale factor): 0.0942\n  [ComfyUI]         Inliers: 9/9, confidence=0.701\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0942, confidence=0.701\n  [ComfyUI]         visible_joints=9, occluded_joints=61\n  [ComfyUI]         median_depth=0.9265626072883606\n  [ComfyUI]     [intrinsics method] scale=0.094, visible_joints=9, occluded_joints=61, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7:\n  [ComfyUI]     mesh_height=1.594m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 31 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0962, max=0.1042, mean=0.0999\n  [ComfyUI]         Median ratio (scale factor): 0.0997\n  [ComfyUI]         Inliers: 31/31, confidence=0.674\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0997, confidence=0.674\n  [ComfyUI]         visible_joints=31, occluded_joints=39\n  [ComfyUI]         median_depth=0.8953904509544373\n  [ComfyUI]     [intrinsics method] scale=0.100, visible_joints=31, occluded_joints=39, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8:\n  [ComfyUI]     mesh_height=1.661m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 60 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1334, max=0.2002, mean=0.1412\n  [ComfyUI]         Median ratio (scale factor): 0.1416\n  [ComfyUI]           Joint 67: ratio=0.2002, rel_error=0.414 -> OUTLIER\n  [ComfyUI]         Inliers: 59/60, confidence=0.577\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1416, confidence=0.577\n  [ComfyUI]         visible_joints=59, occluded_joints=11\n  [ComfyUI]         median_depth=0.8718128800392151\n  [ComfyUI]     [intrinsics method] scale=0.142, visible_joints=59, occluded_joints=11, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9:\n  [ComfyUI]     mesh_height=1.499m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 34 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1042, max=0.1123, mean=0.1091\n  [ComfyUI]         Median ratio (scale factor): 0.1100\n  [ComfyUI]         Inliers: 34/34, confidence=0.628\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1100, confidence=0.628\n  [ComfyUI]         visible_joints=34, occluded_joints=36\n  [ComfyUI]         median_depth=0.9202026128768921\n  [ComfyUI]     [intrinsics method] scale=0.110, visible_joints=34, occluded_joints=36, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10:\n  [ComfyUI]     mesh_height=1.508m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 16 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0942, max=0.1016, mean=0.0982\n  [ComfyUI]         Median ratio (scale factor): 0.0982\n  [ComfyUI]         Inliers: 16/16, confidence=0.666\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0982, confidence=0.666\n  [ComfyUI]         visible_joints=16, occluded_joints=54\n  [ComfyUI]         median_depth=0.8790579438209534\n  [ComfyUI]     [intrinsics method] scale=0.098, visible_joints=16, occluded_joints=54, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Median scale: 0.103\n  [ComfyUI]   [SAM3DBody] Person 0 final: scale=1.000, height=1.26m, tz=1.13, method=intrinsics_visibility, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1 final: scale=1.000, height=1.44m, tz=0.86, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2 final: scale=1.500, height=2.46m, tz=0.95, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3 final: scale=0.937, height=1.40m, tz=1.34, method=intrinsics_visibility, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4 final: scale=1.388, height=2.29m, tz=0.98, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5 final: scale=1.214, height=1.95m, tz=1.01, method=intrinsics_visibility, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6 final: scale=0.914, height=1.36m, tz=0.93, method=intrinsics_visibility, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7 final: scale=0.966, height=1.54m, tz=0.90, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8 final: scale=1.373, height=2.28m, tz=0.87, method=intrinsics_visibility, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9 final: scale=1.067, height=1.60m, tz=0.92, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10 final: scale=0.953, height=1.44m, tz=0.88, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_8dddf901_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmplpg4znbb_person0.obj' took 22.70 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmprj_8xmpi_person1.obj' took 24.04 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpu6qin_8s_person2.obj' took 38.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpjnjux039_person3.obj' took 25.49 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpg7zgylzr_person4.obj' took 24.65 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpux4gf70q_person5.obj' took 26.78 ms\n  [ComfyUI]   [BpyFBXExporter] Person 6: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmptuihhro6_person6.obj' took 23.37 ms\n  [ComfyUI]   [BpyFBXExporter] Person 7: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpxxijr5ou_person7.obj' took 26.07 ms\n  [ComfyUI]   [BpyFBXExporter] Person 8: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9v9tqra_person8.obj' took 25.88 ms\n  [ComfyUI]   [BpyFBXExporter] Person 9: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9wududk_person9.obj' took 22.31 ms\n  [ComfyUI]   [BpyFBXExporter] Person 10: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpwhrdtol6_person10.obj' took 23.16 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_6'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_7'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_8'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_9'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_10'], 'POSE')\n  [ComfyUI]   export finished in 5.2529 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 47.55 seconds"}, {"file": "frame_013.jpg", "time": 58.9, "log": "Capturing execution frames: multiple_masks_depthcorrected.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0601800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 16 nodes\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"16\", 1]}\n  [ComfyUI]   Node 16: SAM3DBodyProcessMultiple\n  [ComfyUI]     Inputs: {\"inference_type\": \"full\", \"adjust_position_from_depth\": true, \"model\": [\"24\", 0], \"image\": [\"36\", 0], \"masks\": [\"39\", 0], \"depth_map\": [\"40\", 0], \"intrinsics\": [\"40\", 9], \"depth_confidence\": [\"40\", 1\n  [ComfyUI]   Node 18: SAM3DBodyExportMultipleFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_multi_rigged.fbx\", \"combine\": true, \"multi_mesh_data\": [\"16\", 0]}\n  [ComfyUI]   Node 24: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI]   Node 29: Preview3D\n  [ComfyUI]     Inputs: {\"model_file\": [\"18\", 0], \"image\": \"\", \"camera_info\": [\"60\", 0]}\n  [ComfyUI]   Node 35: MultibandLoad\n  [ComfyUI]     Inputs: {\"image\": \"fellowship.npz\", \"normalize\": true}\n  [ComfyUI]   Node 36: MultibandToImage\n  [ComfyUI]     Inputs: {\"channels\": \"0,1,2\", \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 39: MultibandToMasks\n  [ComfyUI]     Inputs: {\"channels\": \"0\", \"auto_detect_masks\": true, \"multiband\": [\"35\", 0]}\n  [ComfyUI]   Node 40: DepthAnything_V3\n  [ComfyUI]     Inputs: {\"normalization_mode\": \"Raw\", \"resize_method\": \"resize\", \"invert_depth\": false, \"keep_model_size\": false, \"da3_model\": [\"41\", 0], \"images\": [\"36\", 0]}\n  [ComfyUI]   Node 41: DownloadAndLoadDepthAnythingV3Model\n  [ComfyUI]     Inputs: {\"model\": \"da3_giant.safetensors\", \"precision\": \"auto\"}\n  [ComfyUI]   Node 43: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"39\", 0]}\n  [ComfyUI]   Node 44: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"36\", 0]}\n  [ComfyUI]   Node 46: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 9]}\n  [ComfyUI]   Node 58: LoadImageDataSetFromFolder\n  [ComfyUI]     Inputs: {\"folder\": \"3d\"}\n  [ComfyUI]   Node 59: PreviewAny\n  [ComfyUI]     Inputs: {\"preview\": \"\", \"previewMode\": null, \"source\": [\"40\", 8]}\n  [ComfyUI]   Node 60: CreateLoad3DCamera\n  [ComfyUI]     Inputs: {\"pos_x\": 3, \"pos_y\": 5.1, \"pos_z\": 8, \"target_x\": -0.5, \"target_y\": 2.1, \"target_z\": 0.4, \"zoom\": 3, \"camera_type\": \"perspective\"}\n  [ComfyUI] Generated prompt_id: cc6575d7-ac4b-4535-ae59-0c0a288a58a7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] [DepthAnythingV3] INFO: Downloading model to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/huggingface_hub/file_download.py:979: UserWarning: `local_dir_use_symlinks` parameter is deprecated and will be ignored. The process to download files to a local folder has been updated and do not rely on symlinks anymore. You only need to pass a destination folder as`local_dir`.\n  [ComfyUI] [SAM3DBody] viewer_fbx.html is up to date\n  [ComfyUI] For more details, check out https://huggingface.co/docs/huggingface_hub/main/en/guides/download#download-files-to-local-folder.\n  [ComfyUI] [SAM3DBody] viewer-bundle.js is up to date\n  [ComfyUI]   warnings.warn(\n  [ComfyUI] [SAM3DBody] mesh_preview_fbx.js is up to date\n  [ComfyUI] \n  [ComfyUI] [SAM3DBody] Skipped 5 existing asset file(s)\n  [ComfyUI] [SAM3DBody] Prestartup script completed\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [ComfyUI-DepthAnythingV3] Initializing custom node...\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Node classes imported successfully\n  [ComfyUI] [ComfyUI-DepthAnythingV3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3DBody] Isolated environment found\n  [ComfyUI] [comfy-env] Stubbed 76 imports: Cython, OpenGL, absl, appdirs, appnope, braceexpand, chump, click, cloudpickle, colorlog... and 66 more\n  [ComfyUI] [SAM3DBody] Initializing ComfyUI-SAM3DBody custom nodes...\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [sam3dbody] Auto-discovered v2 config: sam3dbody\n  [ComfyUI] [SAM3DBody] [OK] Loaded 15 node(s)\n  [ComfyUI] [SAM3DBody]   - LoadSAM3DBodyModel\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyAddMeshToSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyExportMultipleFBX\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyGetVertices\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyLoadSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyPreviewRiggedMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcess\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessAdvanced\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyProcessMultiple\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySaveSkeleton\n  [ComfyUI] [SAM3DBody]   - SAM3DBodySelectMesh\n  [ComfyUI] [SAM3DBody]   - SAM3DBodyVisualize\n  [ComfyUI] [SAM3DBody] Registered server routes:\n  [ComfyUI] [SAM3DBody]   POST /sam3d/save_glb\n  [ComfyUI] [SAM3DBody]   POST /sam3d/export_posed_fbx\n  [ComfyUI] [SAM3DBody] [OK] Server routes registered\n  [ComfyUI] [SAM3DBody] Initialization complete\n  [ComfyUI] [SAM3DBody] Model not found locally. Downloading from HuggingFace...\n  [ComfyUI] [SAM3DBody] Download complete.\n  [ComfyUI] Fetching 1 files:   0%|          | 0/1 [00:00<?, ?it/s]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] Fetching 1 files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:13<00:00, 13.35s/it]\n  [ComfyUI] [DepthAnythingV3] INFO: Loading model from: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/models/depthanything3/da3_giant.safetensors\n  [ComfyUI] [DepthAnythingV3] INFO: using SwiGLU layer as FFN\n  [ComfyUI] [DepthAnythingV3] INFO: Built GS head and adapter for Giant model (Gaussian splatting enabled)\n  [ComfyUI] [DepthAnythingV3] INFO: Input image size: 497x1200\n  [ComfyUI] [DepthAnythingV3] INFO: Model input size (after resize): 504x1204\n  [ComfyUI] [DepthAnythingV3] INFO: Model supports 3D Gaussians - will output raw Gaussians\n  [ComfyUI] [DepthAnythingV3] INFO: Model output intrinsics (batch 0): shape=torch.Size([1, 1, 3, 3]), values=\n  [ComfyUI] tensor([[2.9869e+03, 0.0000e+00, 6.0200e+02],\n  [ComfyUI]         [0.0000e+00, 2.6462e+03, 2.5200e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Resizing from 504x1204 to 496x1200, scale: h=0.9841, w=0.9967\n  [ComfyUI] [DepthAnythingV3] INFO: Scaled intrinsics (batch 0):\n  [ComfyUI] tensor([[2.9770e+03, 0.0000e+00, 6.0000e+02],\n  [ComfyUI]         [0.0000e+00, 2.6042e+03, 2.4800e+02],\n  [ComfyUI]         [0.0000e+00, 0.0000e+00, 1.0000e+00]])\n  [ComfyUI] [DepthAnythingV3] INFO: Normalized coordinates: center offset=[-0.00743412  0.01509491  2.532924  ], scale_factor=267.8195\n  [ComfyUI] [DepthAnythingV3] INFO: Saved raw Gaussians (606816 points) to: /tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/gaussians_raw_0000.ply\n  [ComfyUI]   [worker] Request: call_method process_multiple\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_3f6c6174_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'masks', 'inference_type', 'depth_map', 'intrinsics', 'depth_confidence', 'adjust_position_from_depth']\n  [ComfyUI]   [worker] Importing module process_multiple...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcessMultiple...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process_multiple...\n  [ComfyUI]   [SAM3DBody] Depth map provided: shape=(496, 1200), range=[0.85, 2.59]\n  [ComfyUI]   [SAM3DBody] Position adjustment from depth enabled\n  [ComfyUI]   [SAM3DBody] Intrinsics provided: fx=2977.0, fy=2604.2, cx=600.0, cy=248.0\n  [ComfyUI]   [SAM3DBody] Depth confidence provided: shape=(496, 1200), range=[0.00, 1.00]\n  [ComfyUI]   [SAM3DBody] Person 0 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 1 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 2 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 3 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 4 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 5 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 6 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 7 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 8 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 9 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Person 10 SMPL-X data: expression[72 params], global_rots[(127, 3, 3)], body_pose[133 params], shape[45 betas]\n  [ComfyUI]   [SAM3DBody] Using DA3 intrinsics: fx=2977.0, fy=2604.2\n  [ComfyUI]   [SAM3DBody] Image: 1200x497, Depth map: 1200x496\n  [ComfyUI]   [SAM3DBody] Person 0:\n  [ComfyUI]     mesh_height=1.265m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 39 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1009, max=0.1133, mean=0.1045\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 39/39, confidence=0.069\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.069\n  [ComfyUI]         visible_joints=39, occluded_joints=31\n  [ComfyUI]         median_depth=1.1322896480560303\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=39, occluded_joints=31, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1:\n  [ComfyUI]     mesh_height=1.443m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 15 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0992, max=0.1084, mean=0.1039\n  [ComfyUI]         Median ratio (scale factor): 0.1031\n  [ComfyUI]         Inliers: 15/15, confidence=0.626\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1031, confidence=0.626\n  [ComfyUI]         visible_joints=15, occluded_joints=55\n  [ComfyUI]         median_depth=0.8624514937400818\n  [ComfyUI]     [intrinsics method] scale=0.103, visible_joints=15, occluded_joints=55, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2:\n  [ComfyUI]     mesh_height=1.643m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1490, max=0.1603, mean=0.1540\n  [ComfyUI]         Median ratio (scale factor): 0.1547\n  [ComfyUI]         Inliers: 13/13, confidence=0.545\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1547, confidence=0.545\n  [ComfyUI]         visible_joints=13, occluded_joints=57\n  [ComfyUI]         median_depth=0.9505064487457275\n  [ComfyUI]     [intrinsics method] scale=0.155, visible_joints=13, occluded_joints=57, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3:\n  [ComfyUI]     mesh_height=1.494m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 14 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0945, max=0.1015, mean=0.0972\n  [ComfyUI]         Median ratio (scale factor): 0.0966\n  [ComfyUI]         Inliers: 14/14, confidence=0.000\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0966, confidence=0.000\n  [ComfyUI]         visible_joints=14, occluded_joints=56\n  [ComfyUI]         median_depth=1.3449103832244873\n  [ComfyUI]     [intrinsics method] scale=0.097, visible_joints=14, occluded_joints=56, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4:\n  [ComfyUI]     mesh_height=1.649m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 13 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1395, max=0.2134, mean=0.1505\n  [ComfyUI]         Median ratio (scale factor): 0.1431\n  [ComfyUI]           Joint 2: ratio=0.2134, rel_error=0.492 -> OUTLIER\n  [ComfyUI]         Inliers: 12/13, confidence=0.544\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1431, confidence=0.544\n  [ComfyUI]         visible_joints=12, occluded_joints=58\n  [ComfyUI]         median_depth=0.9796111583709717\n  [ComfyUI]     [intrinsics method] scale=0.143, visible_joints=12, occluded_joints=58, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5:\n  [ComfyUI]     mesh_height=1.606m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 32 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1213, max=0.1404, mean=0.1275\n  [ComfyUI]         Median ratio (scale factor): 0.1251\n  [ComfyUI]         Inliers: 32/32, confidence=0.488\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1251, confidence=0.488\n  [ComfyUI]         visible_joints=32, occluded_joints=38\n  [ComfyUI]         median_depth=1.008958339691162\n  [ComfyUI]     [intrinsics method] scale=0.125, visible_joints=32, occluded_joints=38, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6:\n  [ComfyUI]     mesh_height=1.485m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 9 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0921, max=0.0970, mean=0.0946\n  [ComfyUI]         Median ratio (scale factor): 0.0942\n  [ComfyUI]         Inliers: 9/9, confidence=0.701\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0942, confidence=0.701\n  [ComfyUI]         visible_joints=9, occluded_joints=61\n  [ComfyUI]         median_depth=0.9265626072883606\n  [ComfyUI]     [intrinsics method] scale=0.094, visible_joints=9, occluded_joints=61, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7:\n  [ComfyUI]     mesh_height=1.594m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 31 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0962, max=0.1042, mean=0.0999\n  [ComfyUI]         Median ratio (scale factor): 0.0997\n  [ComfyUI]         Inliers: 31/31, confidence=0.674\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0997, confidence=0.674\n  [ComfyUI]         visible_joints=31, occluded_joints=39\n  [ComfyUI]         median_depth=0.8953904509544373\n  [ComfyUI]     [intrinsics method] scale=0.100, visible_joints=31, occluded_joints=39, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8:\n  [ComfyUI]     mesh_height=1.661m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 60 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1334, max=0.2002, mean=0.1412\n  [ComfyUI]         Median ratio (scale factor): 0.1416\n  [ComfyUI]           Joint 67: ratio=0.2002, rel_error=0.414 -> OUTLIER\n  [ComfyUI]         Inliers: 59/60, confidence=0.577\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1416, confidence=0.577\n  [ComfyUI]         visible_joints=59, occluded_joints=11\n  [ComfyUI]         median_depth=0.8718128800392151\n  [ComfyUI]     [intrinsics method] scale=0.142, visible_joints=59, occluded_joints=11, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9:\n  [ComfyUI]     mesh_height=1.499m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 34 joints with valid depth\n  [ComfyUI]         Ratios: min=0.1042, max=0.1123, mean=0.1091\n  [ComfyUI]         Median ratio (scale factor): 0.1100\n  [ComfyUI]         Inliers: 34/34, confidence=0.628\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.1100, confidence=0.628\n  [ComfyUI]         visible_joints=34, occluded_joints=36\n  [ComfyUI]         median_depth=0.9202026128768921\n  [ComfyUI]     [intrinsics method] scale=0.110, visible_joints=34, occluded_joints=36, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10:\n  [ComfyUI]     mesh_height=1.508m\n  [ComfyUI]       [DEBUG] _identify_visible_joints:\n  [ComfyUI]         smpl_joints_3d shape: (127, 3)\n  [ComfyUI]         smpl_joints_2d shape: (70, 2)\n  [ComfyUI]         depth_map shape: (496, 1200)\n  [ComfyUI]         mask shape: (497, 1200)\n  [ComfyUI]         img_h=497, img_w=1200\n  [ComfyUI]         Processing 70 joints (3D has 127, 2D has 70)\n  [ComfyUI]         Sampled 16 joints with valid depth\n  [ComfyUI]         Ratios: min=0.0942, max=0.1016, mean=0.0982\n  [ComfyUI]         Median ratio (scale factor): 0.0982\n  [ComfyUI]         Inliers: 16/16, confidence=0.666\n  [ComfyUI]       [DEBUG] _compute_scale_with_intrinsics result:\n  [ComfyUI]         scale_factor=0.0982, confidence=0.666\n  [ComfyUI]         visible_joints=16, occluded_joints=54\n  [ComfyUI]         median_depth=0.8790579438209534\n  [ComfyUI]     [intrinsics method] scale=0.098, visible_joints=16, occluded_joints=54, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Median scale: 0.103\n  [ComfyUI]   [SAM3DBody] Person 0 final: scale=1.000, height=1.26m, tz=1.13, method=intrinsics_visibility, confidence=0.07\n  [ComfyUI]   [SAM3DBody] Person 1 final: scale=1.000, height=1.44m, tz=0.86, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 2 final: scale=1.500, height=2.46m, tz=0.95, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 3 final: scale=0.937, height=1.40m, tz=1.34, method=intrinsics_visibility, confidence=0.00\n  [ComfyUI]   [SAM3DBody] Person 4 final: scale=1.388, height=2.29m, tz=0.98, method=intrinsics_visibility, confidence=0.54\n  [ComfyUI]   [SAM3DBody] Person 5 final: scale=1.214, height=1.95m, tz=1.01, method=intrinsics_visibility, confidence=0.49\n  [ComfyUI]   [SAM3DBody] Person 6 final: scale=0.914, height=1.36m, tz=0.93, method=intrinsics_visibility, confidence=0.70\n  [ComfyUI]   [SAM3DBody] Person 7 final: scale=0.966, height=1.54m, tz=0.90, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [SAM3DBody] Person 8 final: scale=1.373, height=2.28m, tz=0.87, method=intrinsics_visibility, confidence=0.58\n  [ComfyUI]   [SAM3DBody] Person 9 final: scale=1.067, height=1.60m, tz=0.92, method=intrinsics_visibility, confidence=0.63\n  [ComfyUI]   [SAM3DBody] Person 10 final: scale=0.953, height=1.44m, tz=0.88, method=intrinsics_visibility, confidence=0.67\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_8dddf901_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   [BpyFBXExporter] Person 0: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmplpg4znbb_person0.obj' took 22.70 ms\n  [ComfyUI]   [BpyFBXExporter] Person 1: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmprj_8xmpi_person1.obj' took 24.04 ms\n  [ComfyUI]   [BpyFBXExporter] Person 2: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpu6qin_8s_person2.obj' took 38.19 ms\n  [ComfyUI]   [BpyFBXExporter] Person 3: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpjnjux039_person3.obj' took 25.49 ms\n  [ComfyUI]   [BpyFBXExporter] Person 4: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpg7zgylzr_person4.obj' took 24.65 ms\n  [ComfyUI]   [BpyFBXExporter] Person 5: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpux4gf70q_person5.obj' took 26.78 ms\n  [ComfyUI]   [BpyFBXExporter] Person 6: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmptuihhro6_person6.obj' took 23.37 ms\n  [ComfyUI]   [BpyFBXExporter] Person 7: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpxxijr5ou_person7.obj' took 26.07 ms\n  [ComfyUI]   [BpyFBXExporter] Person 8: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9v9tqra_person8.obj' took 25.88 ms\n  [ComfyUI]   [BpyFBXExporter] Person 9: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpz9wududk_person9.obj' took 22.31 ms\n  [ComfyUI]   [BpyFBXExporter] Person 10: Loaded global_rotations shape (127, 3, 3)\n  [ComfyUI]   OBJ import of 'tmpwhrdtol6_person10.obj' took 23.16 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_multi_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_0'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_1'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_2'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_3'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_4'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_5'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_6'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_7'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_8'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_9'], 'POSE')\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton_10'], 'POSE')\n  [ComfyUI]   export finished in 5.2529 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 47.55 seconds"}, {"file": "frame_014.jpg", "time": 92.348965883255, "log": "Final screenshot"}], "total_time": 71.98}, "rigging": {"frames": [{"file": "frame_000.jpg", "time": 0.0, "log": "Capturing execution frames: rigging.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content."}, {"file": "frame_001.jpg", "time": 0.64, "log": "Capturing execution frames: rigging.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"10\", 2]}\n  [ComfyUI]   Node 10: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"15\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 12: SAM3DBodyExportFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_rigged.fbx\", \"mesh_data\": [\"10\", 0]}\n  [ComfyUI]   Node 13: SAM3DBodyPreviewRiggedMesh\n  [ComfyUI]     Inputs: {\"fbx_output_path\": [\"12\", 0], \"preview\": \"\"}\n  [ComfyUI]   Node 15: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 53a5f920-0a8d-4d3c-819b-61139cfe9de7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  Queuing workflow for execution...\n  [ComfyUI] === Validation PASSED ===\n  [ComfyUI] got prompt\n  [ComfyUI]   [worker] Request: call_method process\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_03c794a0_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'bbox_threshold', 'inference_type', 'mask']\n  [ComfyUI]   [worker] Importing module process...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcess...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process...\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt..."}, {"file": "frame_002.jpg", "time": 35.16, "log": "Capturing execution frames: rigging.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"10\", 2]}\n  [ComfyUI]   Node 10: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"15\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 12: SAM3DBodyExportFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_rigged.fbx\", \"mesh_data\": [\"10\", 0]}\n  [ComfyUI]   Node 13: SAM3DBodyPreviewRiggedMesh\n  [ComfyUI]     Inputs: {\"fbx_output_path\": [\"12\", 0], \"preview\": \"\"}\n  [ComfyUI]   Node 15: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 53a5f920-0a8d-4d3c-819b-61139cfe9de7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  Queuing workflow for execution...\n  [ComfyUI] === Validation PASSED ===\n  [ComfyUI] got prompt\n  [ComfyUI]   [worker] Request: call_method process\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_03c794a0_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'bbox_threshold', 'inference_type', 'mask']\n  [ComfyUI]   [worker] Importing module process...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcess...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process...\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [worker] Method returned"}, {"file": "frame_003.jpg", "time": 38.01, "log": "Capturing execution frames: rigging.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"10\", 2]}\n  [ComfyUI]   Node 10: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"15\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 12: SAM3DBodyExportFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_rigged.fbx\", \"mesh_data\": [\"10\", 0]}\n  [ComfyUI]   Node 13: SAM3DBodyPreviewRiggedMesh\n  [ComfyUI]     Inputs: {\"fbx_output_path\": [\"12\", 0], \"preview\": \"\"}\n  [ComfyUI]   Node 15: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 53a5f920-0a8d-4d3c-819b-61139cfe9de7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  Queuing workflow for execution...\n  [ComfyUI] === Validation PASSED ===\n  [ComfyUI] got prompt\n  [ComfyUI]   [worker] Request: call_method process\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_03c794a0_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'bbox_threshold', 'inference_type', 'mask']\n  [ComfyUI]   [worker] Importing module process...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcess...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process...\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_24bc34d1_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   OBJ import of 'temp_mesh_1769389844.obj' took 23.38 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton'], 'POSE')\n  [ComfyUI]   export finished in 0.5406 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 37.87 seconds"}, {"file": "frame_004.jpg", "time": 40.15, "log": "Capturing execution frames: rigging.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0301608C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 6 nodes\n  [ComfyUI]   Node 3: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"masked_dancing.png\"}\n  [ComfyUI]   Node 4: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"10\", 2]}\n  [ComfyUI]   Node 10: SAM3DBodyProcess\n  [ComfyUI]     Inputs: {\"bbox_threshold\": 0.8, \"inference_type\": \"full\", \"model\": [\"15\", 0], \"image\": [\"3\", 0], \"mask\": [\"3\", 1]}\n  [ComfyUI]   Node 12: SAM3DBodyExportFBX\n  [ComfyUI]     Inputs: {\"output_filename\": \"sam3d_rigged.fbx\", \"mesh_data\": [\"10\", 0]}\n  [ComfyUI]   Node 13: SAM3DBodyPreviewRiggedMesh\n  [ComfyUI]     Inputs: {\"fbx_output_path\": [\"12\", 0], \"preview\": \"\"}\n  [ComfyUI]   Node 15: LoadSAM3DBodyModel\n  [ComfyUI]     Inputs: {\"model_path\": \"/home/shadeform/sam3dbody/ComfyUI/models/sam3dbody\"}\n  [ComfyUI] Generated prompt_id: 53a5f920-0a8d-4d3c-819b-61139cfe9de7\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  Queuing workflow for execution...\n  [ComfyUI] === Validation PASSED ===\n  [ComfyUI] got prompt\n  [ComfyUI]   [worker] Request: call_method process\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_03c794a0_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['model', 'image', 'bbox_threshold', 'inference_type', 'mask']\n  [ComfyUI]   [worker] Importing module process...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class SAM3DBodyProcess...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling process...\n  [ComfyUI]   [SAM3DBody] Loading model from /home/shadeform/sam3dbody/ComfyUI/models/sam3dbody/model.ckpt...\n  [ComfyUI]   [SAM3DBody] Model loaded successfully on cuda\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI]   [worker] Request: call_method export\n  [ComfyUI]   [worker] Loading inputs from /dev/shm/comfyui_pvenv_24bc34d1_in.pt...\n  [ComfyUI]   [worker] Deserializing isolated objects...\n  [ComfyUI]   [worker] Resolving object references...\n  [ComfyUI]   [worker] Inputs ready: ['input_obj_path', 'output_fbx_path', 'skeleton_json_path', 'combined_json_path']\n  [ComfyUI]   [worker] Importing module export...\n  [ComfyUI]   [worker] Module imported\n  [ComfyUI]   [worker] Getting class BpyFBXExporter...\n  [ComfyUI]   [worker] Creating instance...\n  [ComfyUI]   [worker] Calling export...\n  [ComfyUI]   OBJ import of 'temp_mesh_1769389844.obj' took 23.38 ms\n  [ComfyUI] \n  [ComfyUI]   FBX export starting... '/tmp/comfy-test-5ls3qa7l/ComfyUI-SAM3DBody/.comfy-test-env/ComfyUI/output/sam3d_rigged.fbx'\n  [ComfyUI]   (bpy.data.armatures['SAM3D_Skeleton'], 'POSE')\n  [ComfyUI]   export finished in 0.5406 sec.\n  [ComfyUI]   [worker] Method returned\n  [ComfyUI] Prompt executed in 37.87 seconds"}, {"file": "frame_005.jpg", "time": 57.69989204406738, "log": "Final screenshot"}], "total_time": 42.49}, "rigged_mesh_manipulation": {"frames": [{"file": "frame_000.jpg", "time": 0.0, "log": "Capturing execution frames: rigged_mesh_manipulation.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0901800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] Parent element not found\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0C0D902C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content."}, {"file": "frame_001.jpg", "time": 0.51, "log": "Capturing execution frames: rigged_mesh_manipulation.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0901800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] Parent element not found\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0C0D902C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  Queuing workflow for execution...\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 2 nodes\n  [ComfyUI]   Node 2: SAM3DBodyPreviewRiggedMesh\n  [ComfyUI]     Inputs: {\"fbx_output_path\": [\"4\", 0], \"preview\": \"\"}\n  [ComfyUI]   Node 4: SAM3DBodySelectMesh\n  [ComfyUI]     Inputs: {\"source_folder\": \"input\", \"file_path\": \"sam3d_rigged.fbx\"}\n  [ComfyUI] Generated prompt_id: 866a57e6-c08e-4845-867d-55e1b086a5cb\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  [ComfyUI] got prompt\n  [ComfyUI] Prompt executed in 0.16 seconds"}, {"file": "frame_002.jpg", "time": 0.97, "log": "Capturing execution frames: rigged_mesh_manipulation.json\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-error] Failed to load resource: the server responded with a status of 404 (Not Found)\n  [Console-warning] WARNING: Multiple instances of Three.js being imported.\n  [Console-warning] [MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0901800C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  [Console-warning] WebGL: INVALID_OPERATION: loseContext: context already lost\n  [Console-warning] Parent element not found\n  [Console-warning] [GroupMarkerNotSet(crbug.com/242999)!:A0C0D902C40B0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  Queuing workflow for execution...\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 2 nodes\n  [ComfyUI]   Node 2: SAM3DBodyPreviewRiggedMesh\n  [ComfyUI]     Inputs: {\"fbx_output_path\": [\"4\", 0], \"preview\": \"\"}\n  [ComfyUI]   Node 4: SAM3DBodySelectMesh\n  [ComfyUI]     Inputs: {\"source_folder\": \"input\", \"file_path\": \"sam3d_rigged.fbx\"}\n  [ComfyUI] Generated prompt_id: 866a57e6-c08e-4845-867d-55e1b086a5cb\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  [ComfyUI] got prompt\n  [ComfyUI] Prompt executed in 0.16 seconds"}, {"file": "frame_003.jpg", "time": 12.991485357284546, "log": "Final screenshot"}], "total_time": 4.61}};

        // Video player state
        let currentWorkflow = null;
        let playInterval = null;
        let originalLogContent = '';

        // Current frame data for video player
        let currentFrameIndex = 0;
        let currentFrames = [];
        let currentTotalTime = 0;

        function openLightboxByName(name) {
            const w = workflowData[name];
            if (w) openLightbox(w.src, w.title, w.status, w.duration, w.log, w.hardware);
        }

        function openLightbox(src, title, status, duration, logContent, hardware) {
            document.getElementById('lightbox-img').src = src;
            document.getElementById('lightbox-title').textContent = title;
            currentWorkflow = title;
            originalLogContent = logContent;

            const badge = document.getElementById('lightbox-badge');
            badge.textContent = status;
            badge.className = 'lightbox-badge ' + status;

            document.getElementById('lightbox-duration').textContent = duration + 's';
            document.getElementById('lightbox-log').textContent = logContent || '(No log available)';

            // Display hardware info
            const hwEl = document.getElementById('lightbox-hardware');
            if (hardware) {
                const parts = [];
                if (hardware.os) parts.push(hardware.os);
                if (hardware.cpu) parts.push(hardware.cpu);
                if (hardware.gpu) parts.push(hardware.gpu);
                hwEl.textContent = parts.join(' | ');
            } else {
                hwEl.textContent = status === 'skipped' ? '(Did not run on this machine)' : '';
            }

            // Setup video player if video data exists
            const data = videoData[title];
            const videoPlayer = document.getElementById('video-player');

            if (data && data.frames && data.frames.length > 1) {
                currentFrames = data.frames;
                currentTotalTime = data.total_time || data.frames[data.frames.length - 1].time;
                setupVideoSlider(data.frames, currentTotalTime);
                updateVideoFrameByIndex(title, data.frames.length - 1);
                videoPlayer.classList.add('active');
            } else {
                videoPlayer.classList.remove('active');
            }

            document.getElementById('lightbox').classList.add('active');
            history.replaceState(null, '', '#' + encodeURIComponent(title));
        }

        function buildSliderRange(frames, totalTime) {
            // Build noUiSlider range with frames at their time percentages
            const range = { 'min': frames[0].time };
            frames.forEach((frame, idx) => {
                if (idx > 0 && idx < frames.length - 1) {
                    const pct = (frame.time / totalTime * 100).toFixed(1) + '%';
                    range[pct] = frame.time;
                }
            });
            range['max'] = frames[frames.length - 1].time;
            return range;
        }

        function setupVideoSlider(frames, totalTime) {
            const sliderEl = document.getElementById('video-slider');

            // Destroy existing slider if any
            if (sliderEl.noUiSlider) {
                sliderEl.noUiSlider.destroy();
            }

            const range = buildSliderRange(frames, totalTime);

            noUiSlider.create(sliderEl, {
                start: frames[frames.length - 1].time,
                snap: true,
                range: range,
                pips: {
                    mode: 'range',
                    density: 100
                }
            });

            sliderEl.noUiSlider.on('update', function(values) {
                const time = parseFloat(values[0]);
                const frameIdx = frames.findIndex(f => Math.abs(f.time - time) < 0.01);
                if (frameIdx >= 0 && frameIdx !== currentFrameIndex) {
                    currentFrameIndex = frameIdx;
                    showFrame(currentWorkflow, frameIdx);
                }
            });
        }

        function showFrame(workflowName, frameIndex) {
            const data = videoData[workflowName];
            if (!data || !data.frames) return;

            const frame = data.frames[frameIndex];
            const img = document.getElementById('lightbox-img');

            // Use high-quality screenshot for the last frame
            const isLastFrame = frameIndex === data.frames.length - 1;
            if (isLastFrame && workflowData[workflowName] && workflowData[workflowName].src) {
                img.src = workflowData[workflowName].src;
            } else {
                img.src = 'videos/' + workflowName + '/' + frame.file;
            }

            const counter = document.getElementById('video-frame-counter');
            const totalTime = data.total_time || data.frames[data.frames.length - 1].time;
            counter.textContent = frame.time.toFixed(1) + 's / ' + totalTime.toFixed(1) + 's';

            const logEl = document.getElementById('lightbox-log');
            if (frame.log) {
                logEl.textContent = frame.log;
                logEl.scrollTop = logEl.scrollHeight;
            }
        }

        function updateVideoFrameByIndex(workflowName, frameIndex) {
            currentFrameIndex = frameIndex;
            showFrame(workflowName, frameIndex);

            // Update slider position
            const sliderEl = document.getElementById('video-slider');
            if (sliderEl.noUiSlider && currentFrames[frameIndex]) {
                sliderEl.noUiSlider.set(currentFrames[frameIndex].time);
            }
        }

        function toggleVideoPlay() {
            const btn = document.getElementById('video-play-btn');
            if (playInterval) {
                clearInterval(playInterval);
                playInterval = null;
                btn.innerHTML = '&#9654; Play';
            } else {
                btn.innerHTML = '&#9632; Stop';
                playInterval = setInterval(() => {
                    if (!currentFrames.length) return;
                    currentFrameIndex = (currentFrameIndex + 1) % currentFrames.length;
                    updateVideoFrameByIndex(currentWorkflow, currentFrameIndex);
                }, 500);
            }
        }

        function closeLightbox() {
            // Stop video playback
            if (playInterval) {
                clearInterval(playInterval);
                playInterval = null;
                document.getElementById('video-play-btn').innerHTML = '&#9654; Play';
            }
            document.getElementById('lightbox').classList.remove('active');
            // Clear hash
            history.replaceState(null, '', window.location.pathname);
        }

        document.getElementById('lightbox').onclick = (e) => {
            if (e.target.id === 'lightbox') closeLightbox();
        };

        document.onkeydown = (e) => {
            if (e.key === 'Escape') closeLightbox();
        };

        // Handle hash on page load and hash change
        function openFromHash() {
            const hash = decodeURIComponent(window.location.hash.slice(1));
            if (hash && workflowData[hash]) {
                const w = workflowData[hash];
                openLightbox(w.src, w.title, w.status, w.duration, w.log, w.hardware);
            }
        }

        window.addEventListener('hashchange', openFromHash);
        window.addEventListener('load', openFromHash);
    </script>
</body>
</html>