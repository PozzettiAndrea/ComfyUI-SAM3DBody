# SAM3DBody - Environment Configuration
# Run: comfy-env install

# ═══════════════════════════════════════════════════════════════════════════════
# ISOLATED ENVIRONMENT
# ═══════════════════════════════════════════════════════════════════════════════

[sam3dbody]
python = "3.11"  # bpy only supports up to 3.11
cuda_version = "auto"
pytorch_version = "auto"

    [sam3dbody.cuda]
    # CUDA extensions - resolved automatically by comfy-env
    detectron2 = "*"
    torch-scatter = "*"
    torch-sparse = "*"
    torch-cluster = "*"

    [sam3dbody.packages]
    requirements = [
        # Core dependencies
        "numpy>=1.21.0,<2.0.0",
        "pillow>=9.0.0",
        "opencv-python>=4.8.0",

        # SAM 3D Body specific
        "pytorch-lightning>=2.0.0",
        "pyrender>=0.1.45",
        "yacs>=0.1.8",
        "scikit-image>=0.19.0",
        "einops>=0.6.0",
        "timm>=0.9.0",
        "dill>=0.3.6",
        "pandas>=1.5.0",
        "rich>=13.0.0",
        "hydra-core>=1.3.0",
        "hydra-submitit-launcher>=1.2.0",
        "hydra-colorlog>=1.2.0",
        "pyrootutils>=1.0.4",
        "webdataset>=0.2.0",
        "chump>=1.6.0",
        "networkx==3.2.1",
        "roma>=1.3.0",
        "joblib>=1.2.0",
        "seaborn>=0.12.0",
        "wandb>=0.15.0",
        "appdirs>=1.4.4",
        "appnope>=0.1.3",
        "ffmpeg-python>=0.2.0",
        "cython>=0.29.0",
        "jsonlines>=3.1.0",
        "loguru>=0.7.0",
        "optree>=0.9.0",
        "fvcore>=0.1.5",
        "pycocotools>=2.0.6",
        "tensorboard>=2.13.0",

        # HuggingFace
        "huggingface-hub>=0.16.0",
        "transformers>=4.30.0",

        # Blender Python module (headless)
        "bpy==4.2",
    ]

    [sam3dbody.packages.linux]
    requirements = ["xtcocotools>=1.14"]

    [sam3dbody.packages.darwin]
    requirements = []

    [sam3dbody.packages.windows]
    requirements = ["xtcocotools>=1.14"]
